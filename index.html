<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä ÿßŸÑŸÅÿßÿÆÿ± - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿ•ÿØŸÖÿßŸÜŸäÿ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: radial-gradient(circle at center, #0a0a0a 0%, #000000 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
            perspective: 1200px;
            overflow-x: hidden;
        }

        body.power-save-mode {
            background: #0c0c0c;
            perspective: none;
        }

        body.power-save-mode .stars-background,
        body.power-save-mode .light-effects,
        body.power-save-mode .light-effect,
        body.power-save-mode .shadow-layer,
        body.power-save-mode .gold-glow,
        body.power-save-mode .player-glow {
            display: none !important;
        }

        body.power-save-mode .music-player {
            background: linear-gradient(145deg, #0c0c0c, #1a1a1a);
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.5),
                0 0 5px rgba(139, 0, 139, 0.3);
            border: 1px solid rgba(139, 0, 139, 0.3);
        }

        body.power-save-mode .player-header {
            background: linear-gradient(135deg, #4b0082 0%, #8a2be2 100%);
            box-shadow: 0 3px 10px rgba(139, 0, 139, 0.3);
        }

        body.power-save-mode .album-art-container {
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.4), 
                0 0 10px rgba(139, 0, 139, 0.3);
        }

        body.power-save-mode .visualizer-container,
        body.power-save-mode .bass-indicator,
        body.power-save-mode .spectrum-display {
            display: none !important;
        }

        body.power-save-mode .advanced-controls {
            background: rgba(15, 15, 15, 0.95);
        }

        body.power-save-mode .control-btn {
            box-shadow: 
                0 3px 8px rgba(0, 0, 0, 0.3),
                0 0 3px rgba(139, 0, 139, 0.2);
        }

        body.power-save-mode .play-pause {
            box-shadow: 
                0 5px 12px rgba(0, 0, 0, 0.4), 
                0 0 10px rgba(139, 0, 139, 0.3);
        }

        body.power-save-mode .power-save-btn {
            background: linear-gradient(135deg, #4b0082, #8a2be2);
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.5);
            color: #FFD700;
        }

        .power-save-btn {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: none;
            color: #e0e0e0;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.3);
            z-index: 20;
            border: 1px solid rgba(255, 215, 0, 0.2);
            font-weight: 600;
        }

        .power-save-btn:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            box-shadow: 0 0 20px rgba(139, 0, 139, 0.5);
            color: #FFD700;
            transform: translateX(-50%) translateY(-2px);
        }

        .stars-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .star {
            position: absolute;
            background-color: #FFD700;
            border-radius: 50%;
            animation: twinkle 4s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .light-effects {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
            pointer-events: none;
        }

        .light-spot {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,215,0,0.15) 0%, transparent 70%);
            filter: blur(40px);
            animation: pulseLight 8s infinite alternate;
        }

        .light-spot:nth-child(1) {
            width: 300px;
            height: 300px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
            background: radial-gradient(circle, rgba(255,20,147,0.2) 0%, transparent 70%);
        }

        .light-spot:nth-child(2) {
            width: 400px;
            height: 400px;
            bottom: 5%;
            right: 5%;
            background: radial-gradient(circle, rgba(138,43,226,0.2) 0%, transparent 70%);
            animation-delay: 2s;
        }

        .light-spot:nth-child(3) {
            width: 250px;
            height: 250px;
            top: 50%;
            left: 70%;
            background: radial-gradient(circle, rgba(0,191,255,0.15) 0%, transparent 70%);
            animation-delay: 4s;
        }

        @keyframes pulseLight {
            0% { opacity: 0.3; transform: scale(1); }
            100% { opacity: 0.7; transform: scale(1.2); }
        }

        .light-effect {
            position: fixed;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 20, 147, 0.1) 0%, transparent 70%);
            filter: blur(40px);
            z-index: -1;
            animation: lightMove 15s infinite linear;
        }

        .light-effect:nth-child(1) {
            top: 10%;
            left: 10%;
            animation-delay: 0s;
            background: radial-gradient(circle, rgba(255,20,147,0.1) 0%, transparent 70%);
        }

        .light-effect:nth-child(2) {
            bottom: 10%;
            right: 10%;
            animation-delay: 5s;
            background: radial-gradient(circle, rgba(138,43,226,0.1) 0%, transparent 70%);
        }

        .light-effect:nth-child(3) {
            top: 50%;
            left: 50%;
            animation-delay: 10s;
            background: radial-gradient(circle, rgba(0,191,255,0.1) 0%, transparent 70%);
        }

        @keyframes lightMove {
            0% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(50px, 50px) scale(1.2); }
            50% { transform: translate(0, 100px) scale(1); }
            75% { transform: translate(-50px, 50px) scale(1.2); }
            100% { transform: translate(0, 0) scale(1); }
        }

        .main-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            transform-style: preserve-3d;
        }

        .player-section {
            flex: 1;
            min-width: 500px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s ease;
        }

        .music-player {
            width: 100%;
            background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
            border-radius: 25px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.8),
                0 0 30px rgba(139, 0, 139, 0.4),
                0 0 60px rgba(255, 215, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
            border: 1px solid rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            transform-style: preserve-3d;
            transform: translateZ(50px);
            transition: box-shadow 0.5s ease;
        }

        .music-player:hover {
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.9),
                0 0 40px rgba(139, 0, 139, 0.6),
                0 0 80px rgba(255, 215, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .player-header {
            background: linear-gradient(135deg, #4b0082 0%, #8a2be2 100%);
            padding: 25px;
            text-align: center;
            position: relative;
            box-shadow: 0 5px 20px rgba(139, 0, 139, 0.5);
            border-bottom: 2px solid rgba(255, 215, 0, 0.5);
        }

        .player-header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.7), transparent);
        }

        .player-header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            color: #FFD700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            font-weight: 700;
            letter-spacing: 1px;
        }

        .player-header p {
            font-size: 15px;
            opacity: 0.9;
            color: white;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .album-art-container {
            position: relative;
            width: 240px;
            height: 240px;
            margin: 30px auto;
            border-radius: 50%;
            background: linear-gradient(135deg, #4b0082, #8a2be2);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.6), 
                0 0 25px rgba(139, 0, 139, 0.6),
                0 0 40px rgba(255, 215, 0, 0.3),
                inset 0 0 20px rgba(0, 0, 0, 0.7);
            overflow: hidden;
            transition: transform 0.5s ease;
            transform-style: preserve-3d;
        }

        .album-art-container.rotating {
            animation: rotateAlbum 15s infinite linear;
        }

        @keyframes rotateAlbum {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .album-art-container:hover {
            transform: scale(1.05) rotateY(5deg);
        }

        .album-art-container::before {
            content: "";
            position: absolute;
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border-radius: 50%;
            z-index: 2;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .album-art {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            position: absolute;
            z-index: 1;
        }

        .album-art-shadow {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 
                inset 0 0 30px rgba(0, 0, 0, 0.8),
                0 0 60px rgba(139, 0, 139, 0.4);
            z-index: 3;
            pointer-events: none;
        }

        .song-info {
            text-align: center;
            padding: 0 25px;
        }

        .song-title {
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
        }

        .song-artist {
            font-size: 17px;
            color: #e0e0e0;
            margin-bottom: 25px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.4);
        }

        .progress-area {
            padding: 0 30px;
            margin-bottom: 25px;
        }

        .progress-bar {
            height: 10px;
            width: 100%;
            background: #1a1a1a;
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 0 0 8px rgba(0, 0, 0, 0.7),
                0 2px 4px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #8a2be2, #00ff7f);
            border-radius: 10px;
            transition: width 0.1s linear;
            box-shadow: 
                0 0 15px rgba(139, 0, 139, 0.7),
                inset 0 0 5px rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .progress::after {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 15px;
            height: 100%;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .timer {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 15px;
            color: #e0e0e0;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 25px;
            gap: 30px;
        }

        .control-btn {
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: none;
            color: #e0e0e0;
            font-size: 20px;
            cursor: pointer;
            padding: 15px;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.4),
                0 0 5px rgba(255, 215, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.1);
        }

        .control-btn:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            transform: translateY(-3px);
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.5), 
                0 0 15px rgba(139, 0, 139, 0.5),
                0 0 25px rgba(255, 215, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            color: #FFD700;
        }

        .play-pause {
            width: 75px;
            height: 75px;
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            font-size: 28px;
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.5), 
                0 0 20px rgba(139, 0, 139, 0.6),
                0 0 30px rgba(255, 215, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            color: #FFD700;
        }

        .play-pause:hover {
            background: linear-gradient(135deg, #9400d3, #da70d6);
            transform: scale(1.1);
        }

        .file-input, .image-input {
            display: none;
        }

        .file-label, .image-label {
            display: block;
            text-align: center;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            color: #e0e0e0;
            padding: 16px 25px;
            margin: 0 25px 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            font-weight: 600;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .file-label:hover, .image-label:hover {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            color: #FFD700;
        }

        .repeat-btn.active, .shuffle-btn.active {
            color: #00ff7f;
            text-shadow: 0 0 15px rgba(0, 255, 127, 0.8);
            box-shadow: 
                0 0 20px rgba(0, 255, 127, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .volume-control {
            display: flex;
            align-items: center;
            padding: 0 30px 25px;
            gap: 12px;
        }

        .volume-control i {
            color: #e0e0e0;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
            font-size: 20px;
        }

        .volume-slider {
            flex: 1;
            height: 8px;
            background: #1a1a1a;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            box-shadow: 
                inset 0 0 8px rgba(0, 0, 0, 0.7),
                0 2px 4px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .volume-progress {
            height: 100%;
            width: 70%;
            background: linear-gradient(90deg, #8a2be2, #00ff7f);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(139, 0, 139, 0.6);
        }

        .playlist {
            max-height: 200px;
            overflow-y: auto;
            margin: 0 25px 25px;
            border-radius: 12px;
            background: rgba(30, 30, 30, 0.7);
            box-shadow: 
                inset 0 0 15px rgba(0, 0, 0, 0.6),
                0 5px 10px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .playlist-item {
            padding: 14px 18px;
            border-bottom: 1px solid rgba(60, 60, 60, 0.7);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #e0e0e0;
        }

        .playlist-item:hover {
            background: rgba(138, 43, 226, 0.3);
        }

        .playlist-item.active {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.5);
            color: #FFD700;
        }

        .playlist-item i {
            color: #8a2be2;
            text-shadow: 0 0 8px rgba(138, 43, 226, 0.5);
        }

        .playlist-item.active i {
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }

        .playlist::-webkit-scrollbar {
            width: 10px;
        }

        .playlist::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 10px;
        }

        .playlist::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            border-radius: 10px;
            box-shadow: 0 0 8px rgba(139, 0, 139, 0.5);
        }

        .songs-count {
            text-align: center;
            padding: 12px;
            color: #e0e0e0;
            font-size: 15px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }

        .visualizer-container {
            width: 100%;
            height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        .visualizer {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 70px;
            gap: 4px;
        }

        .bar {
            width: 5px;
            background: linear-gradient(to top, #8a2be2, #00ff7f);
            border-radius: 3px;
            transition: height 0.1s ease;
            box-shadow: 0 0 8px rgba(139, 0, 139, 0.5);
        }

        .bass-indicator {
            width: 100%;
            height: 6px;
            background: #1a1a1a;
            border-radius: 5px;
            margin: 15px 30px 0;
            overflow: hidden;
            position: relative;
            box-shadow: 
                inset 0 0 8px rgba(0, 0, 0, 0.7),
                0 2px 4px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .bass-level {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4b0082, #8a2be2);
            border-radius: 5px;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(139, 0, 139, 0.6);
        }

        .shadow-layer {
            position: absolute;
            width: 90%;
            height: 50px;
            bottom: -25px;
            left: 5%;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            filter: blur(15px);
            z-index: -1;
            animation: shadowPulse 4s infinite alternate;
        }

        @keyframes shadowPulse {
            0% { opacity: 0.5; transform: scale(0.95); }
            100% { opacity: 0.8; transform: scale(1.05); }
        }

        .gold-glow {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 27px;
            background: linear-gradient(45deg, transparent, rgba(255,215,0,0.1), transparent);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .music-player:hover .gold-glow {
            opacity: 1;
        }

        .audio-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            padding: 0 30px 20px;
        }

        .audio-preset {
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: none;
            color: #e0e0e0;
            font-size: 13px;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 0 8px rgba(139, 0, 139, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.1);
        }

        .audio-preset:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            color: #FFD700;
        }

        .audio-preset.active {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.5);
            color: #FFD700;
        }

        .player-glow {
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 35px;
            background: radial-gradient(circle at center, rgba(255, 20, 147, 0.1) 0%, transparent 70%);
            z-index: -1;
            opacity: 0.7;
            filter: blur(20px);
        }

        .camera-toggle, .boost-btn {
            position: fixed;
            top: 20px;
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: none;
            color: #e0e0e0;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.3);
            z-index: 20;
            border: 1px solid rgba(255, 215, 0, 0.2);
            font-weight: 600;
        }

        .camera-toggle {
            left: 20px;
        }

        .boost-btn {
            right: 20px;
        }

        .camera-toggle:hover, .boost-btn:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            box-shadow: 0 0 20px rgba(139, 0, 139, 0.5);
            color: #FFD700;
            transform: translateY(-2px);
        }

        .camera-toggle.active, .boost-btn.active {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            box-shadow: 0 0 20px rgba(139, 0, 139, 0.7);
            color: #FFD700;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse-effect {
            animation: pulse 0.5s infinite;
        }

        .advanced-section {
            flex: 1;
            min-width: 500px;
            position: relative;
        }
        
        .advanced-controls {
            background: rgba(20, 20, 20, 0.9);
            border-radius: 25px;
            padding: 25px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.8),
                0 0 30px rgba(139, 0, 139, 0.4),
                0 0 60px rgba(255, 215, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            height: 100%;
            overflow-y: auto;
        }
        
        .advanced-controls h3 {
            text-align: center;
            color: #FFD700;
            margin-bottom: 25px;
            font-size: 24px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .eq-container {
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .eq-band {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 4px;
            min-width: 40px;
        }
        
        .eq-bands-container {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            min-width: 900px;
            padding: 0 10px;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: #8a2be2 #1a1a1a;
        }
        
        .eq-bands-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .eq-bands-container::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }
        
        .eq-bands-container::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, #8a2be2, #00ff7f);
            border-radius: 4px;
        }
        
        .eq-slider {
            -webkit-appearance: slider-vertical;
            width: 25px;
            height: 120px;
            background: linear-gradient(to top, #8a2be2, #1a1a1a, #ff1493);
            border-radius: 12px;
            outline: none;
            margin: 10px 0;
            cursor: pointer;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .eq-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            background: #FFD700;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }
        
        .eq-slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: #FFD700;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            border: none;
        }
        
        .eq-freq {
            font-size: 9px;
            color: #FFD700;
            margin-top: 5px;
            text-align: center;
        }
        
        .eq-value {
            font-size: 9px;
            color: #fff;
            margin-top: 5px;
        }
        
        .preset-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .preset-btn {
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #e0e0e0;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }
        
        .preset-btn:hover, .preset-btn.active {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            color: #FFD700;
        }
        
        .analysis-panel {
            background: rgba(10, 10, 10, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .spectrum-display {
            width: 100%;
            height: 100px;
            background: #0a0a0a;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .advanced-settings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .setting-group {
            background: rgba(15, 15, 15, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .setting-slider {
            width: 100%;
            margin: 10px 0;
        }

        .quality-settings {
            background: rgba(15, 15, 15, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .quality-settings select, .quality-settings input {
            background: #1a1a1a;
            color: white;
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
            margin: 5px 0;
            width: 100%;
        }

        .quality-settings label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            color: #e0e0e0;
        }
        
        .audio-enhancement-controls {
            background: rgba(15, 15, 15, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .enhancement-slider {
            width: 100%;
            margin: 10px 0;
        }
        
        .enhancement-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
            color: #e0e0e0;
        }
        
        .enhancement-value {
            color: #FFD700;
            font-weight: 600;
        }
        
        .enhancement-indicator {
            display: inline-block;
            padding: 2px 8px;
            background: rgba(255, 215, 0, 0.2);
            color: #FFD700;
            border-radius: 10px;
            font-size: 12px;
            margin-right: 5px;
        }
        
        .enhancement-presets {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .enhancement-preset-btn {
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #e0e0e0;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            flex: 1;
            text-align: center;
        }
        
        .enhancement-preset-btn:hover, .enhancement-preset-btn.active {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            color: #FFD700;
        }
        
        .quality-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
            color: #FFD700;
        }
        
        .quality-bar {
            height: 6px;
            flex: 1;
            background: #1a1a1a;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .quality-level {
            height: 100%;
            background: linear-gradient(90deg, #8a2be2, #00ff7f);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .security-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: none;
            color: #e0e0e0;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.3);
            z-index: 20;
            border: 1px solid rgba(255, 215, 0, 0.2);
            font-weight: 600;
            font-family: inherit;
        }

        .security-btn:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            box-shadow: 0 0 20px rgba(139, 0, 139, 0.5);
            color: #FFD700;
            transform: translateY(-2px);
        }

        .security-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .security-content {
            background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.3);
        }

        .security-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 10px;
        }

        .security-header h3 {
            color: #FFD700;
            margin: 0;
        }

        .close-security-modal {
            background: none;
            border: none;
            color: #FFD700;
            font-size: 24px;
            cursor: pointer;
        }

        .security-status {
            margin-bottom: 25px;
        }

        .security-indicators {
            background: rgba(138, 43, 226, 0.2);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .security-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .security-indicator:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .security-status-value {
            color: #00ff7f;
            font-weight: 600;
        }

        .security-actions {
            margin-bottom: 25px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }

        .action-btn {
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #e0e0e0;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            text-align: center;
        }

        .action-btn:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            color: #FFD700;
            transform: translateY(-2px);
        }

        .security-settings {
            margin-bottom: 25px;
        }

        .settings-grid {
            background: rgba(15, 15, 15, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .setting-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            cursor: pointer;
            color: #e0e0e0;
        }

        .setting-item:last-child {
            margin-bottom: 0;
        }

        .setting-item input {
            margin-left: 10px;
        }

        .security-logs h4 {
            color: #e0e0e0;
            margin-bottom: 10px;
        }

        .logs-container {
            background: rgba(10, 10, 10, 0.9);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            max-height: 200px;
            overflow-y: auto;
            font-size: 12px;
            line-height: 1.5;
        }

        .logs-container::-webkit-scrollbar {
            width: 8px;
        }

        .logs-container::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }

        .logs-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            border-radius: 4px;
        }

        .paranoid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #FFD700;
            font-size: 24px;
            text-align: center;
            animation: paranoidPulse 2s infinite alternate;
        }

        @keyframes paranoidPulse {
            0% { background: rgba(0, 0, 0, 0.95); }
            100% { background: rgba(10, 10, 0, 0.95); }
        }

        .paranoid-overlay h1 {
            font-size: 36px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
        }

        .paranoid-overlay p {
            font-size: 18px;
            color: #e0e0e0;
            margin-bottom: 30px;
            max-width: 600px;
            line-height: 1.6;
        }

        .disable-paranoid-btn {
            background: linear-gradient(135deg, #8a2be2, #9400d3);
            color: #FFD700;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(139, 0, 139, 0.5);
        }

        .disable-paranoid-btn:hover {
            background: linear-gradient(135deg, #9400d3, #da70d6);
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(139, 0, 139, 0.7);
        }

        .shortcuts-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .shortcuts-content {
            background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.3);
        }
        
        .shortcuts-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 10px;
        }
        
        .shortcuts-header h3 {
            color: #FFD700;
            margin: 0;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: #FFD700;
            font-size: 24px;
            cursor: pointer;
        }
        
        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .shortcut-key {
            background: rgba(255, 215, 0, 0.2);
            color: #FFD700;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .shortcuts-btn, .fullscreen-btn {
            position: fixed;
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border: none;
            color: #e0e0e0;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(139, 0, 139, 0.3);
            z-index: 20;
            border: 1px solid rgba(255, 215, 0, 0.2);
            font-weight: 600;
        }
        
        .shortcuts-btn {
            bottom: 20px;
            left: 20px;
        }
        
        .fullscreen-btn {
            bottom: 20px;
            right: 20px;
        }
        
        .shortcuts-btn:hover, .fullscreen-btn:hover {
            background: linear-gradient(145deg, #8a2be2, #9400d3);
            box-shadow: 0 0 20px rgba(139, 0, 139, 0.5);
            color: #FFD700;
            transform: translateY(-2px);
        }
        
        .format-support {
            text-align: center;
            color: #e0e0e0;
            margin-top: 10px;
            font-size: 14px;
            opacity: 0.8;
        }

        .active-glow {
            box-shadow: 0 0 20px rgba(0, 255, 127, 0.7) !important;
        }
        
        .glow-text {
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }

        @media (max-width: 1100px) {
            .main-container {
                flex-direction: column;
            }
            
            .player-section, .advanced-section {
                min-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .eq-bands-container {
                min-width: 600px;
            }
            
            .eq-slider {
                width: 20px;
                height: 80px;
            }
            
            .eq-freq {
                font-size: 8px;
            }
            
            .eq-value {
                font-size: 8px;
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .security-btn {
                bottom: 140px;
                right: 20px;
            }
        }

        body:fullscreen {
            padding: 0;
        }

        body:-webkit-full-screen {
            padding: 0;
        }

        body:-moz-full-screen {
            padding: 0;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© - ÿßŸÑÿ™ÿµÿ≠Ÿäÿ≠ 7 */
        @media (max-width: 768px) {
            .player-section, .advanced-section {
                min-width: 100% !important;
            }
            
            .album-art-container {
                width: 180px !important;
                height: 180px !important;
            }
            
            .controls {
                gap: 15px !important;
                padding: 15px !important;
            }
            
            .play-pause {
                width: 60px !important;
                height: 60px !important;
                font-size: 24px !important;
            }
            
            .control-btn {
                padding: 12px !important;
                font-size: 18px !important;
            }
            
            .song-title {
                font-size: 20px !important;
            }
            
            .player-header h1 {
                font-size: 22px !important;
            }
            
            .eq-bands-container {
                overflow-x: auto !important;
                padding-bottom: 10px !important;
            }
            
            .eq-slider {
                height: 60px !important;
                width: 15px !important;
            }
            
            .camera-toggle, .boost-btn, .power-save-btn, .shortcuts-btn, .fullscreen-btn, .security-btn {
                font-size: 14px !important;
                padding: 10px 15px !important;
                white-space: nowrap;
            }
            
            .camera-toggle {
                left: 10px !important;
                top: 10px !important;
            }
            
            .boost-btn {
                right: 10px !important;
                top: 10px !important;
            }
            
            .security-btn {
                bottom: 100px !important;
                right: 10px !important;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px !important;
            }
            
            .music-player {
                border-radius: 15px !important;
            }
            
            .player-header {
                padding: 15px !important;
            }
            
            .album-art-container {
                width: 150px !important;
                height: 150px !important;
                margin: 20px auto !important;
            }
            
            .progress-area {
                padding: 0 15px !important;
            }
            
            .file-label, .image-label {
                margin: 0 15px 15px !important;
                padding: 12px !important;
                font-size: 14px !important;
            }
            
            .playlist {
                margin: 0 15px 15px !important;
            }
        }
    </style>
</head>
<body>
    <div class="stars-background" id="starsBackground"></div>
    
    <div class="light-effects">
        <div class="light-spot"></div>
        <div class="light-spot"></div>
        <div class="light-spot"></div>
    </div>
    
    <div class="light-effect"></div>
    <div class="light-effect"></div>
    <div class="light-effect"></div>
    
    <button class="camera-toggle" id="cameraToggle">ÿ™ÿ¥ÿ∫ŸäŸÑ ÿØŸàÿ±ÿßŸÜ ÿßŸÑŸÉÿßŸÖŸäÿ±ÿß</button>
    <button class="boost-btn" id="boostBtn">ÿ™ÿ∂ÿÆŸäŸÖ ÿßŸÑÿµŸàÿ™</button>
    
    <button class="power-save-btn" id="powerSaveBtn">ÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ∑ÿßŸÇÿ©</button>
    
    <button class="shortcuts-btn" id="shortcutsBtn">ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠</button>
    
    <button class="fullscreen-btn" id="fullscreenBtn">ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ©</button>
    
    <button class="security-btn" id="securityBtn">üîí ÿßŸÑÿ£ŸÖÿßŸÜ</button>
    
    <div class="shortcuts-modal" id="shortcutsModal">
        <div class="shortcuts-content">
            <div class="shortcuts-header">
                <h3>ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠</h3>
                <button class="close-modal" id="closeModal">‚úï</button>
            </div>
            <div class="shortcuts-list">
                <div class="shortcut-item">
                    <span>ÿ™ÿ¥ÿ∫ŸäŸÑ/ÿ•ŸäŸÇÿßŸÅ ŸÖÿ§ŸÇÿ™</span>
                    <span class="shortcut-key">ŸÖÿ≥ÿßŸÅÿ©</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿßŸÑÿ£ÿ∫ŸÜŸäÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©</span>
                    <span class="shortcut-key">‚Üí</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿßŸÑÿ£ÿ∫ŸÜŸäÿ© ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©</span>
                    <span class="shortcut-key">‚Üê</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿµŸàÿ™</span>
                    <span class="shortcut-key">‚Üë</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿµŸàÿ™</span>
                    <span class="shortcut-key">‚Üì</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿ™ŸÉÿ±ÿßÿ±</span>
                    <span class="shortcut-key">R</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿπÿ¥Ÿàÿßÿ¶Ÿä</span>
                    <span class="shortcut-key">S</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿ™ÿ∂ÿÆŸäŸÖ ÿßŸÑÿµŸàÿ™</span>
                    <span class="shortcut-key">B</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿØŸàÿ±ÿßŸÜ ÿßŸÑŸÉÿßŸÖŸäÿ±ÿß</span>
                    <span class="shortcut-key">C</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ∑ÿßŸÇÿ©</span>
                    <span class="shortcut-key">P</span>
                </div>
                <div class="shortcut-item">
                    <span>ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ©</span>
                    <span class="shortcut-key">F11</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™</span>
                    <span class="shortcut-key">H</span>
                </div>
                <div class="shortcut-item">
                    <span>ŸÑŸàÿ≠ÿ© ÿßŸÑÿ£ŸÖÿßŸÜ</span>
                    <span class="shortcut-key">Ctrl+Shift+S</span>
                </div>
                <div class="shortcut-item">
                    <span>ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ</span>
                    <span class="shortcut-key">Ctrl+Shift+P</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="security-modal" id="securityModal">
        <div class="security-content">
            <div class="security-header">
                <h3>ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ£ŸÖŸÜŸäÿ©</h3>
                <button class="close-security-modal" id="closeSecurityModal">‚úï</button>
            </div>
            
            <div class="security-status">
                <h4>ÿ≠ÿßŸÑÿ© ÿßŸÑÿ£ŸÖÿßŸÜ ÿßŸÑÿ≠ÿßŸÑŸäÿ©:</h4>
                <div class="security-indicators">
                    <div class="security-indicator">
                        <span>üîí ÿ™ÿ¥ŸÅŸäÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ:</span>
                        <span class="security-status-value" id="encryptionStatus">‚úì ŸÖŸÅÿπŸÑ</span>
                    </div>
                    <div class="security-indicator">
                        <span>üõ°Ô∏è ŸÅÿ≠ÿµ ÿßŸÑŸÖŸÑŸÅÿßÿ™:</span>
                        <span class="security-status-value" id="fileScanStatus">‚úì ŸÖŸÅÿπŸÑ</span>
                    </div>
                    <div class="security-indicator">
                        <span>üö´ ÿ≠ŸÖÿßŸäÿ© XSS:</span>
                        <span class="security-status-value" id="xssProtectionStatus">‚úì ŸÖŸÅÿπŸÑ</span>
                    </div>
                    <div class="security-indicator">
                        <span>üîê ÿ≠ŸÖÿßŸäÿ© CSRF:</span>
                        <span class="security-status-value" id="csrfProtectionStatus">‚úì ŸÖŸÅÿπŸÑ</span>
                    </div>
                </div>
            </div>
            
            <div class="security-actions">
                <h4>ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ©:</h4>
                <div class="action-buttons">
                    <button class="action-btn" id="clearCacheBtn">üßπ ŸÖÿ≥ÿ≠ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©</button>
                    <button class="action-btn" id="scanThreatsBtn">üîç ŸÅÿ≠ÿµ ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™</button>
                    <button class="action-btn" id="generateReportBtn">üìä ÿ™ŸÇÿ±Ÿäÿ± ÿ£ŸÖŸÜŸä</button>
                    <button class="action-btn" id="paranoidModeBtn">üîê ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ</button>
                </div>
            </div>
            
            <div class="security-settings">
                <h4>ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ:</h4>
                <div class="settings-grid">
                    <label class="setting-item">
                        <input type="checkbox" id="autoScanFiles" checked>
                        <span>ŸÅÿ≠ÿµ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÇÿ®ŸÑ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="blockSuspicious" checked>
                        <span>ŸÖŸÜÿπ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÖÿ¥ÿ®ŸàŸáÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="logAllEvents" checked>
                        <span>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ£ŸÖŸÜŸäÿ©</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="enableNotifications" checked>
                        <span>ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ</span>
                    </label>
                </div>
            </div>
            
            <div class="security-logs">
                <h4>ÿ≥ÿ¨ŸÑ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ£ŸÖŸÜŸäÿ©:</h4>
                <div class="logs-container" id="securityLogs">
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-container">
        <div class="player-section" id="playerSection">
            <div class="shadow-layer"></div>
            
            <div class="gold-glow"></div>
            
            <div class="player-glow"></div>
            
            <div class="music-player">
                <div class="player-header">
                    <h1 class="glow-text">ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä ÿßŸÑŸÅÿßÿÆÿ±</h1>
                    <p class="glow-text">ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿ•ÿØŸÖÿßŸÜŸäÿ© - ÿ¨ŸàÿØÿ© ÿµŸàÿ™ ÿßÿ≥ÿ™ÿ´ŸÜÿßÿ¶Ÿäÿ©</p>
                </div>
                
                <div class="album-art-container" id="albumArtContainer">
                    <img id="albumImage" class="album-art" src="" alt="ÿ∫ŸÑÿßŸÅ ÿßŸÑÿ£ÿ∫ŸÜŸäÿ©">
                    <div class="album-art-shadow"></div>
                </div>
                
                <label for="imageInput" class="image-label glow-text">
                    ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ© ÿ∫ŸÑÿßŸÅ
                </label>
                <input type="file" id="imageInput" class="image-input" accept="image/*">
                
                <div class="song-info">
                    <h2 class="song-title glow-text" id="songTitle">ÿßÿÆÿ™ÿ± ÿ£ÿ∫ŸÜŸäÿ©</h2>
                    <p class="song-artist glow-text" id="songArtist">ŸÅŸÜÿßŸÜ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ</p>
                </div>
                
                <div class="visualizer-container">
                    <div class="visualizer" id="visualizer"></div>
                </div>
                
                <div class="bass-indicator">
                    <div class="bass-level" id="bassLevel"></div>
                </div>
                
                <div class="progress-area">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="timer">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="control-btn repeat-btn" id="repeatBtn" title="ÿ™ŸÉÿ±ÿßÿ±">
                        <i>üîÅ</i>
                    </button>
                    <button class="control-btn prev-btn" id="prevBtn" title="ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©">
                        <i>‚èÆÔ∏è</i>
                    </button>
                    <button class="control-btn play-pause" id="playPauseBtn" title="ÿ™ÿ¥ÿ∫ŸäŸÑ / ÿ•ŸäŸÇÿßŸÅ">
                        <i>‚ñ∂Ô∏è</i>
                    </button>
                    <button class="control-btn next-btn" id="nextBtn" title="ÿßŸÑÿ™ÿßŸÑŸäÿ©">
                        <i>‚è≠Ô∏è</i>
                    </button>
                    <button class="control-btn shuffle-btn" id="shuffleBtn" title="ÿπÿ¥Ÿàÿßÿ¶Ÿä">
                        <i>üîÄ</i>
                    </button>
                </div>
                
                <div class="audio-controls">
                    <button class="audio-preset" data-preset="bass">ÿ¨ŸáŸäÿ± ŸÖŸÉÿ´ŸÅ</button>
                    <button class="audio-preset active" data-preset="normal">ÿπÿßÿØŸä</button>
                    <button class="audio-preset" data-preset="treble">ŸÜŸÇÿßÿ° ÿßŸÑÿµŸàÿ™</button>
                </div>
                
                <div class="volume-control">
                    <i>üîä</i>
                    <div class="volume-slider" id="volumeSlider">
                        <div class="volume-progress" id="volumeProgress"></div>
                    </div>
                </div>
                
                <label for="fileInput" class="file-label glow-text">
                    ÿßÿÆÿ™ÿ± ŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ (ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ™Ÿáÿß ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©)
                </label>
                <input type="file" id="fileInput" class="file-input" accept="audio/*, .mp3, .wav, .ogg, .aac, .flac, .m4a, .aiff, .wma, .alac" multiple>
                
                <div class="format-support">ŸäÿØÿπŸÖ: MP3, WAV, OGG, AAC, FLAC, M4A, AIFF, WMA, ALAC</div>
                
                <div class="songs-count" id="songsCount">ÿπÿØÿØ ÿßŸÑÿ£ÿ∫ÿßŸÜŸä: 0</div>
                
                <div class="playlist" id="playlist">
                </div>
            </div>
        </div>
        
        <div class="advanced-section">
            <div class="advanced-controls">
                <h3>ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿµŸàÿ™Ÿä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ</h3>
                
                <div class="audio-enhancement-controls">
                    <h4 style="color: #FFD700;">ŸÜÿ∏ÿßŸÖ ÿ™ÿ∂ÿÆŸäŸÖ ÿßŸÑÿµŸàÿ™ ÿßŸÑÿ∞ŸÉŸä</h4>
                    
                    <div class="enhancement-label">
                        <span>üîä ÿßŸÑÿµŸàÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä</span>
                        <span class="enhancement-value" id="volumeValue">70%</span>
                    </div>
                    <input type="range" class="enhancement-slider" id="volumeEnhancementSlider" min="0" max="100" value="70">
                    
                    <div class="enhancement-label">
                        <span>üí• ÿ™ÿ∂ÿÆŸäŸÖ ÿßŸÑÿµŸàÿ™ <span class="enhancement-indicator" id="boostIndicator">x1.0</span></span>
                        <span class="enhancement-value" id="boostValue">0%</span>
                    </div>
                    <input type="range" class="enhancement-slider" id="boostEnhancementSlider" min="0" max="100" value="0">
                    
                    <div class="enhancement-label">
                        <span>üéöÔ∏è ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±</span>
                        <span class="enhancement-value" id="bassValue">0%</span>
                    </div>
                    <input type="range" class="enhancement-slider" id="bassEnhancementSlider" min="0" max="100" value="0">
                    
                    <div class="quality-indicator">
                        <span>üéµ ÿ¨ŸàÿØÿ© ÿßŸÑÿµŸàÿ™:</span>
                        <div class="quality-bar">
                            <div class="quality-level" id="qualityLevel" style="width: 90%;"></div>
                        </div>
                        <span id="qualityValue">ÿπÿßŸÑŸäÿ©</span>
                    </div>
                    
                    <div class="enhancement-presets">
                        <button class="enhancement-preset-btn active" data-preset="normal">ÿπÿßÿØŸä</button>
                        <button class="enhancement-preset-btn" data-preset="boost">ÿ™ÿ∂ÿÆŸäŸÖ</button>
                        <button class="enhancement-preset-btn" data-preset="bass">ÿ¨ŸáŸäÿ±</button>
                        <button class="enhancement-preset-btn" data-preset="clear">ÿµŸàÿ™ ŸÜŸÇŸä</button>
                    </div>
                </div>
                
                <div class="quality-settings">
                    <h4 style="color: #FFD700;">ÿ•ÿπÿØÿßÿØÿßÿ™ ÿ¨ŸàÿØÿ© ÿßŸÑÿµŸàÿ™</h4>
                    <label>ÿ¨ŸàÿØÿ© ÿßŸÑÿµŸàÿ™:</label>
                    <select id="audioQuality">
                        <option value="standard">ŸÇŸäÿßÿ≥Ÿä (44.1kHz)</option>
                        <option value="high">ÿπÿßŸÑŸä ÿßŸÑÿ¨ŸàÿØÿ© (48kHz)</option>
                        <option value="hd" selected>ÿπÿßŸÑŸäÿ© ÿßŸÑÿØŸÇÿ© (96kHz)</option>
                    </select>
                    
                    <label>
                        <input type="checkbox" id="enableDithering" checked> 
                        ÿ™ŸÖŸÉŸäŸÜ Dithering (ŸÑÿ¨ŸàÿØÿ© ÿ£ŸÅÿ∂ŸÑ ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑŸÖŸÜÿÆŸÅÿ∂ÿ©)
                    </label>
                    
                    <label>
                        <input type="checkbox" id="enableCompressor" checked> 
                        ÿ™ŸÖŸÉŸäŸÜ Compressor (ŸÑÿ™Ÿàÿßÿ≤ŸÜ ÿßŸÑÿµŸàÿ™)
                    </label>
                </div>
                
                <div class="eq-container">
                    <h4 style="color: #e0e0e0; text-align: center;">ÿßŸÑŸÖÿπÿßÿØŸÑ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä (18 ŸÜÿ∑ÿßŸÇ)</h4>
                    <div class="eq-bands-container" id="eqBands">
                    </div>
                    
                    <div class="preset-buttons">
                        <button class="preset-btn active" data-preset="flat">ŸÖÿ≥ÿ∑ÿ≠</button>
                        <button class="preset-btn" data-preset="bass">ÿ¨ŸáŸäÿ± ŸÖŸÉÿ´ŸÅ</button>
                        <button class="preset-btn" data-preset="vocal">Ÿàÿßÿ∂ÿ≠ ÿßŸÑÿµŸàÿ™</button>
                        <button class="preset-btn" data-preset="acoustic">ÿ£ŸÉŸàÿ≥ÿ™ŸäŸÉ</button>
                        <button class="preset-btn" data-preset="rock">ÿ±ŸàŸÉ</button>
                        <button class="preset-btn" data-preset="jazz">ÿ¨ÿßÿ≤</button>
                        <button class="preset-btn" data-preset="classical">ŸÉŸÑÿßÿ≥ŸäŸÉŸä</button>
                        <button class="preset-btn" data-preset="electronic">ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</button>
                        <button class="preset-btn" data-preset="hardstyle">Ÿáÿßÿ±ÿØÿ≥ÿ™ÿßŸäŸÑ</button>
                    </div>
                </div>
                
                <div class="analysis-panel">
                    <h4 style="color: #e0e0e0; text-align: center;">ŸÖÿ≠ŸÑŸÑ ÿßŸÑÿ∑ŸäŸÅ ÿßŸÑÿ≠ŸÇŸäŸÇŸä</h4>
                    <div class="spectrum-display" id="spectrumDisplay">
                    </div>
                </div>
                
                <div class="advanced-settings">
                    <div class="setting-group">
                        <h5 style="color: #FFD700;">ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ</h5>
                        <label style="color: #e0e0e0;">ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ</label>
                        <input type="range" class="setting-slider" id="playbackSpeed" min="50" max="200" value="100">
                        <span id="speedValue" style="color: #e0e0e0;">100%</span>
                        
                        <label style="color: #e0e0e0; display: block; margin-top: 10px;">ÿßŸÑÿ™ÿØÿßÿÆŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ£ÿ∫ÿßŸÜŸä</label>
                        <input type="range" class="setting-slider" id="crossfade" min="0" max="10" value="0">
                        <span id="crossfadeValue" style="color: #e0e0e0;">0 ÿ´ÿßŸÜŸäÿ©</span>
                    </div>
                    
                    <div class="setting-group">
                        <h5 style="color: #FFD700;">ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ©</h5>
                        <label style="color: #e0e0e0;">ÿßŸÑÿµÿØŸâ</label>
                        <input type="range" class="setting-slider" id="reverb" min="0" max="100" value="0">
                        <span id="reverbValue" style="color: #e0e0e0;">0%</span>
                        
                        <label style="color: #e0e0e0; display: block; margin-top: 10px;">ÿßŸÑÿ™ŸÉÿ±ÿßÿ± A-B</label>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button class="preset-btn" id="setPointA">ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜŸÇÿ∑ÿ© A</button>
                            <button class="preset-btn" id="setPointB">ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜŸÇÿ∑ÿ© B</button>
                            <button class="preset-btn" id="toggleABRepeat">ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ŸÉÿ±ÿßÿ±</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ© ŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿµŸàÿ™
        let audioContext, analyser, source, eqFilters, reverbNode, bassBoostNode, volumeNode, gainNode, compressorNode;
        let spectrumAnalyser, spectrumDataArray, dataArray, animationFrameId;
        let audioNodes = {};
        let eqGains = new Array(18).fill(0);
        let reverbLevel = 0;
        let bassBoostLevel = 0;
        let volumeBoostLevel = 0;

        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            initializePlayer();
            initializeSecurity();
            initializeAdvancedControls();
            requestNotificationPermission();
        });
        
        function createStars() {
            const starsBackground = document.getElementById('starsBackground');
            const starCount = 160;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                const size = Math.random() * 3 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                const delay = Math.random() * 4;
                const duration = Math.random() * 3 + 2;
                star.style.animationDelay = `${delay}s`;
                star.style.animationDuration = `${duration}s`;
                
                starsBackground.appendChild(star);
            }
        }
        
        // ÿØŸàÿßŸÑ ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿµŸàÿ™ ÿßŸÑÿπÿßŸÖÿ©
        function updateBassBoost(level) {
            bassBoostLevel = level;
            if (bassBoostNode) {
                const gainDB = (level / 100) * 24 - 12;
                bassBoostNode.gain.value = gainDB;
                console.log(`üîä ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±: ${gainDB.toFixed(1)}dB`);
            }
        }
        
        function updateReverb(level) {
            reverbLevel = level;
            if (audioNodes.dryGain && audioNodes.wetGain) {
                const dryLevel = Math.max(0, 1 - (level / 100));
                const wetLevel = level / 100;
                
                audioNodes.dryGain.gain.value = dryLevel;
                audioNodes.wetGain.gain.value = wetLevel * 0.5;
                
                console.log(`üéöÔ∏è ÿßŸÑÿµÿØŸâ: ${level}% (ÿ¨ÿßŸÅ: ${dryLevel.toFixed(2)}, ÿ±ÿ∑ÿ®: ${wetLevel.toFixed(2)})`);
            }
        }
        
        function updateVolumeBoost(level) {
            volumeBoostLevel = level;
            if (gainNode) {
                const boostFactor = 1 + (level / 100);
                gainNode.gain.value = boostFactor;
                console.log(`üîä ŸÖÿ∂ÿÆŸÖ ÿßŸÑÿµŸàÿ™: x${boostFactor.toFixed(2)}`);
            }
        }
        
        function updateEQ(bandIndex, gainValue) {
            if (eqFilters && eqFilters[bandIndex]) {
                eqFilters[bandIndex].gain.value = gainValue;
                eqGains[bandIndex] = gainValue;
            }
        }
        
        let audio, playPauseBtn, prevBtn, nextBtn, repeatBtn, shuffleBtn, progressBar, progress, currentTimeEl, durationEl;
        let volumeSlider, volumeProgress, fileInput, imageInput, playlist, songTitle, songArtist, albumImage;
        let albumArtContainer, songsCount, cameraToggle, boostBtn, powerSaveBtn, visualizer, bassLevel;
        let songs = [], currentSongIndex = 0, isPlaying = false, isRepeating = false, isShuffling = false;
        let isCameraRotating = false, isBoosted = false, isAlbumRotating = false, isPowerSaveMode = false;
        let originalVolume = 0.7, bars = [], rotationAngle = 0, cameraRotationId = null;
        let objectURLs = [], isAudioContextInitialized = false;
        
        function initializePlayer() {
            audio = new Audio();
            playPauseBtn = document.getElementById('playPauseBtn');
            prevBtn = document.getElementById('prevBtn');
            nextBtn = document.getElementById('nextBtn');
            repeatBtn = document.getElementById('repeatBtn');
            shuffleBtn = document.getElementById('shuffleBtn');
            progressBar = document.getElementById('progressBar');
            progress = document.getElementById('progress');
            currentTimeEl = document.getElementById('currentTime');
            durationEl = document.getElementById('duration');
            volumeSlider = document.getElementById('volumeSlider');
            volumeProgress = document.getElementById('volumeProgress');
            fileInput = document.getElementById('fileInput');
            imageInput = document.getElementById('imageInput');
            playlist = document.getElementById('playlist');
            songTitle = document.getElementById('songTitle');
            songArtist = document.getElementById('songArtist');
            albumImage = document.getElementById('albumImage');
            albumArtContainer = document.getElementById('albumArtContainer');
            songsCount = document.getElementById('songsCount');
            cameraToggle = document.getElementById('cameraToggle');
            boostBtn = document.getElementById('boostBtn');
            powerSaveBtn = document.getElementById('powerSaveBtn');
            visualizer = document.getElementById('visualizer');
            bassLevel = document.getElementById('bassLevel');
            
            // ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ŸÑŸÑÿ£ŸÑÿ®ŸàŸÖ
            albumImage.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240' viewBox='0 0 240 240'%3E%3Cdefs%3E%3CradialGradient id='grad' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' style='stop-color:%234b0082;stop-opacity:1'/%3E%3Cstop offset='100%25' style='stop-color:%238a2be2;stop-opacity:1'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='240' height='240' fill='url(%23grad)'/%3E%3Ccircle cx='120' cy='120' r='80' fill='none' stroke='%23FFD700' stroke-width='3'/%3E%3Ccircle cx='120' cy='120' r='60' fill='none' stroke='%23FFD700' stroke-width='2' opacity='0.7'/%3E%3C/svg%3E";
            
            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿµŸàÿ™
            audio.volume = 0.7;
            volumeProgress.style.width = '70%';
            
            powerSaveBtn.addEventListener('click', function() {
                isPowerSaveMode = !isPowerSaveMode;
                document.body.classList.toggle('power-save-mode', isPowerSaveMode);
                
                if (isPowerSaveMode) {
                    powerSaveBtn.textContent = 'Ÿàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä';
                    powerSaveBtn.classList.add('active');
                    
                    if (isCameraRotating) {
                        toggleCameraRotation();
                    }
                    
                    stopAlbumRotation();
                    
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                } else {
                    powerSaveBtn.textContent = 'ÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ∑ÿßŸÇÿ©';
                    powerSaveBtn.classList.remove('active');
                    
                    if (isPlaying) {
                        startVisualizer();
                    }
                }
            });
            
            playPauseBtn.addEventListener('click', async function() {
                if (songs.length === 0) {
                    alert('Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ∫ŸÜŸäÿ© ÿ£ŸàŸÑÿßŸã');
                    return;
                }
                
                if (!isAudioContextInitialized) {
                    await initializeAudioProcessing();
                }
                
                if (isPlaying) {
                    audio.pause();
                    playPauseBtn.innerHTML = '<i>‚ñ∂Ô∏è</i>';
                    playPauseBtn.classList.remove('active-glow');
                    stopAlbumRotation();
                    
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                } else {
                    audio.play().catch(e => {
                        console.log("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ:", e);
                        if (e.name === 'NotAllowedError') {
                            alert('Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸÅÿßÿπŸÑ ŸÖÿπ ÿßŸÑÿµŸÅÿ≠ÿ© ÿ£ŸàŸÑÿßŸã ŸÑÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿµŸàÿ™');
                        }
                    });
                    playPauseBtn.innerHTML = '<i>‚è∏Ô∏è</i>';
                    playPauseBtn.classList.add('active-glow');
                    startAlbumRotation();
                    
                    if (!isPowerSaveMode) {
                        startVisualizer();
                    }
                }
                isPlaying = !isPlaying;
            });
            
            repeatBtn.addEventListener('click', function() {
                isRepeating = !isRepeating;
                repeatBtn.classList.toggle('active', isRepeating);
                if (isRepeating) {
                    repeatBtn.classList.add('active-glow');
                } else {
                    repeatBtn.classList.remove('active-glow');
                }
            });
            
            shuffleBtn.addEventListener('click', function() {
                isShuffling = !isShuffling;
                shuffleBtn.classList.toggle('active', isShuffling);
                if (isShuffling) {
                    shuffleBtn.classList.add('active-glow');
                } else {
                    shuffleBtn.classList.remove('active-glow');
                }
            });
            
            progressBar.addEventListener('click', function(e) {
                if (songs.length === 0 || isNaN(audio.duration)) return;
                
                const progressWidth = this.clientWidth;
                const clickedOffsetX = e.offsetX;
                const songDuration = audio.duration;
                
                audio.currentTime = (clickedOffsetX / progressWidth) * songDuration;
            });
            
            audio.addEventListener('timeupdate', function() {
                if (songs.length === 0 || isNaN(audio.duration)) return;
                
                const currentTime = audio.currentTime;
                const duration = audio.duration;
                
                const progressPercent = (currentTime / duration) * 100;
                progress.style.width = `${progressPercent}%`;
                
                currentTimeEl.textContent = formatTime(currentTime);
                
                if (currentTime >= duration - 0.5) {
                    if (isRepeating) {
                        audio.currentTime = 0;
                        audio.play();
                    } else {
                        playNextSong();
                    }
                }
            });
            
            audio.addEventListener('loadedmetadata', function() {
                if (!isNaN(audio.duration)) {
                    durationEl.textContent = formatTime(audio.duration);
                }
            });
            
            audio.addEventListener('ended', function() {
                if (isRepeating) {
                    audio.currentTime = 0;
                    audio.play();
                } else {
                    playNextSong();
                }
            });
            
            audio.addEventListener('error', function(e) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿµŸàÿ™:', e);
                isPlaying = false;
                playPauseBtn.innerHTML = '<i>‚ñ∂Ô∏è</i>';
                playPauseBtn.classList.remove('active-glow');
                stopAlbumRotation();
                
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }
                
                alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿµŸàÿ™Ÿä. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖŸÑŸÅ Ÿàÿ™ÿ¨ÿ±ÿ®ÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.');
            });
            
            volumeSlider.addEventListener('click', function(e) {
                const volumeWidth = this.clientWidth;
                const clickedOffsetX = e.offsetX;
                const volumeLevel = clickedOffsetX / volumeWidth;
                
                audio.volume = volumeLevel;
                originalVolume = volumeLevel;
                volumeProgress.style.width = `${volumeLevel * 100}%`;
            });

fileInput.addEventListener('change', function(e) {
    const files = e.target.files;
    if (files.length === 0) return;
    
    // ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑŸÄ URLs ÿßŸÑŸÇÿØŸäŸÖÿ©ÿå ŸÜÿ≠ÿ™ŸÅÿ∏ ÿ®Ÿáÿß
    // ŸàŸÜÿ∂ŸäŸÅ ÿßŸÑÿ¨ÿØŸäÿØÿ© ŸÅŸÇÿ∑
    
    const startIndex = songs.length;
    const newSongs = [];
    
    for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const url = URL.createObjectURL(file);
        objectURLs.push(url); // ŸÜÿ∂ŸäŸÅ URL ÿ¨ÿØŸäÿØ ŸÅŸÇÿ∑
        
        newSongs.push({
            title: file.name.replace(/\.[^/.]+$/, ""),
            artist: "ŸÅŸÜÿßŸÜ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ",
            src: url,
            cover: ""
        });
        
        const playlistItem = document.createElement('div');
        playlistItem.className = 'playlist-item';
        playlistItem.innerHTML = `
            <i>üéµ</i>
            <span>${file.name.replace(/\.[^/.]+$/, "")}</span>
        `;
        
        const songIndex = startIndex + i;
        playlistItem.addEventListener('click', function() {
            currentSongIndex = songIndex;
            loadSong(currentSongIndex);
            audio.play().catch(e => console.log("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ:", e));
            isPlaying = true;
            playPauseBtn.innerHTML = '<i>‚è∏Ô∏è</i>';
            playPauseBtn.classList.add('active-glow');
            startAlbumRotation();
            
            document.querySelectorAll('.playlist-item').forEach(item => {
                item.classList.remove('active');
            });
            playlistItem.classList.add('active');
            
            if (!isPowerSaveMode) {
                startVisualizer();
            }
        });
        
        playlist.appendChild(playlistItem);
    }
    
    songs.push(...newSongs);
    updateSongsCount();
    
    if (songs.length === newSongs.length) {
        currentSongIndex = 0;
        loadSong(currentSongIndex);
        if (playlist.children.length > 0) {
            playlist.children[0].classList.add('active');
        }
    }
    
    fileInput.value = '';
});

            
            imageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const customAlbumImage = e.target.result;
                    albumImage.src = customAlbumImage;
                    
                    if (songs.length > 0 && currentSongIndex < songs.length) {
                        songs[currentSongIndex].cover = customAlbumImage;
                    }
                };
                reader.readAsDataURL(file);
            });
            
            nextBtn.addEventListener('click', playNextSong);
            
            prevBtn.addEventListener('click', function() {
                if (songs.length === 0) return;
                
                currentSongIndex--;
                if (currentSongIndex < 0) {
                    currentSongIndex = songs.length - 1;
                }
                
                loadSong(currentSongIndex);
                if (isPlaying) {
                    audio.play().catch(e => console.log("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ:", e));
                }
                
                updatePlaylistActive();
            });
            
            cameraToggle.addEventListener('click', toggleCameraRotation);
            
            boostBtn.addEventListener('click', function() {
                if (isBoosted) {
                    audio.volume = originalVolume;
                    boostBtn.classList.remove('active');
                    isBoosted = false;
                } else {
                    audio.volume = Math.min(1.0, originalVolume * 1.8);
                    boostBtn.classList.add('active');
                    isBoosted = true;
                }
            });
            
            document.querySelectorAll('.audio-preset').forEach(preset => {
                preset.addEventListener('click', function() {
                    const presetType = this.dataset.preset;
                    
                    document.querySelectorAll('.audio-preset').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    switch(presetType) {
                        case 'bass':
                            audio.volume = Math.min(1.0, originalVolume * 1.3);
                            break;
                        case 'treble':
                            audio.volume = Math.min(1.0, originalVolume * 1.1);
                            break;
                        case 'normal':
                        default:
                            audio.volume = originalVolume;
                            break;
                    }
                });
            });
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ≥ŸÑÿßŸäÿØÿ± ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±
            const bassEnhancementSlider = document.getElementById('bassEnhancementSlider');
            if (bassEnhancementSlider) {
                bassEnhancementSlider.addEventListener('input', function() {
                    updateBassBoost(parseInt(this.value));
                });
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ≥ŸÑÿßŸäÿØÿ± ÿßŸÑÿµÿØŸâ
            const reverbSlider = document.getElementById('reverb');
            if (reverbSlider) {
                reverbSlider.addEventListener('input', function() {
                    updateReverb(parseInt(this.value));
                });
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ≥ŸÑÿßŸäÿØÿ± ŸÖÿ∂ÿÆŸÖ ÿßŸÑÿµŸàÿ™
            const boostEnhancementSlider = document.getElementById('boostEnhancementSlider');
            if (boostEnhancementSlider) {
                boostEnhancementSlider.addEventListener('input', function() {
                    updateVolumeBoost(parseInt(this.value));
                });
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ± ŸÖŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
            document.querySelectorAll('.enhancement-preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const preset = this.dataset.preset;
                    switch(preset) {
                        case 'bass':
                            updateBassBoost(70);
                            break;
                        case 'boost':
                            updateBassBoost(30);
                            break;
                        case 'clear':
                            updateBassBoost(10);
                            break;
                        default:
                            updateBassBoost(0);
                            break;
                    }
                });
            });
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÖÿ≥ÿ®ŸÇÿ© ŸÑŸÑŸÖÿπÿßÿØŸÑ
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const preset = this.dataset.preset;
                    const presets = {
                        flat: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        bass: [6, 4, 2, 1, 0, -1, -2, -3, -4, -5, -4, -3, -2, -1, 0, 1, 2, 3],
                        vocal: [-2, -1, 0, 1, 2, 3, 2, 1, 0, -1, -2, -1, 0, 1, 2, 3, 2, 1],
                        acoustic: [2, 1, 0, -1, 0, 1, 2, 3, 2, 1, 0, -1, 0, 1, 2, 3, 2, 1],
                        rock: [4, 3, 2, 1, 0, -1, 0, 1, 2, 3, 4, 3, 2, 1, 0, -1, 0, 1],
                        jazz: [1, 0, -1, -2, -1, 0, 1, 2, 3, 2, 1, 0, -1, -2, -1, 0, 1, 2],
                        classical: [0, -1, -2, -1, 0, 1, 2, 3, 4, 3, 2, 1, 0, -1, -2, -1, 0, 1],
                        electronic: [3, 2, 1, 0, -1, 0, 1, 2, 3, 4, 3, 2, 1, 0, -1, 0, 1, 2],
                        hardstyle: [5, 4, 3, 2, 1, 0, -1, -2, -3, -4, -3, -2, -1, 0, 1, 2, 3, 4]
                    };
                    
                    if (presets[preset]) {
                        for (let i = 0; i < presets[preset].length; i++) {
                            updateEQ(i, presets[preset][i]);
                        }
                    }
                });
            });
            
            updateSongsCount();
            
            window.player = {
                audio,
                songs,
                currentSongIndex,
                isPlaying,
                loadSong,
                playNextSong,
                formatTime,
                eqFilters
            };
        }
        
        async function initializeAudioProcessing() {
            if (isAudioContextInitialized) return;

            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿπŸÇÿØ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
                source = audioContext.createMediaElementSource(audio);
                volumeNode = audioContext.createGain();
                gainNode = audioContext.createGain();
                compressorNode = audioContext.createDynamicsCompressor();
                
                // ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ∂ÿßÿ∫ÿ∑
                compressorNode.threshold.value = -24;
                compressorNode.knee.value = 30;
                compressorNode.ratio.value = 12;
                compressorNode.attack.value = 0.003;
                compressorNode.release.value = 0.25;
                
                // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≠ŸÑŸÑ ÿßŸÑÿ∑ŸäŸÅ
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 2048;
                analyser.smoothingTimeConstant = 0.8;
                
                spectrumAnalyser = audioContext.createAnalyser();
                spectrumAnalyser.fftSize = 512;
                spectrumAnalyser.smoothingTimeConstant = 0.6;
                
                // ÿ•ŸÜÿ¥ÿßÿ° ŸÜÿ∏ÿßŸÖ ÿßŸÑÿµÿØŸâ (Reverb)
                reverbNode = audioContext.createConvolver();
                createReverbImpulse();
                
                // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±
                bassBoostNode = audioContext.createBiquadFilter();
                bassBoostNode.type = 'lowshelf';
                bassBoostNode.frequency.value = 150;
                bassBoostNode.gain.value = 0;
                
                // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ∂ÿÆŸÖ ÿßŸÑÿµŸàÿ™ ÿßŸÑÿπÿßŸÖ
                const boostNode = audioContext.createGain();
                boostNode.gain.value = 1.0;
                
                // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿπÿßÿØŸÑ 18 ŸÜÿ∑ÿßŸÇ
                eqFilters = createEQFilters(audioContext);
                
                // ÿ•ŸÜÿ¥ÿßÿ° ÿ≥ŸÑÿ≥ŸÑÿ© ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿµŸàÿ™:
                // ŸÖÿµÿØÿ± ÿßŸÑÿµŸàÿ™ ‚Üí ÿ∂ÿßÿ∫ÿ∑ ‚Üí ŸÖÿπÿßÿØŸÑ ‚Üí ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ± ‚Üí ŸÖÿ∂ÿÆŸÖ ‚Üí ÿµÿØŸâ ‚Üí ŸÖÿ≠ŸÑŸÑ ‚Üí ŸÖÿÆÿ±ÿ¨
                
                let lastNode = source;
                
                // ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ∂ÿßÿ∫ÿ∑
                lastNode.connect(compressorNode);
                lastNode = compressorNode;
                
                // ÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÖÿπÿßÿØŸÑ
                eqFilters.forEach(filter => {
                    lastNode.connect(filter);
                    lastNode = filter;
                });
                
                // ÿ™ŸàÿµŸäŸÑ ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±
                lastNode.connect(bassBoostNode);
                lastNode = bassBoostNode;
                
                // ÿ™ŸàÿµŸäŸÑ ŸÖÿ∂ÿÆŸÖ ÿßŸÑÿµŸàÿ™
                lastNode.connect(gainNode);
                lastNode = gainNode;
                
                // ÿ™ŸàÿµŸäŸÑ Ÿàÿ≠ÿØÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿµŸàÿ™
                lastNode.connect(volumeNode);
                lastNode = volumeNode;
                
                // ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿµÿØŸâ (ŸÖÿ™Ÿàÿßÿ≤Ÿä)
                const dryGain = audioContext.createGain();
                const wetGain = audioContext.createGain();
                
                lastNode.connect(dryGain);
                lastNode.connect(reverbNode);
                reverbNode.connect(wetGain);
                
                const merger = audioContext.createChannelMerger(2);
                dryGain.connect(merger, 0, 0);
                wetGain.connect(merger, 0, 1);
                lastNode = merger;
                
                // ÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿ∑ŸäŸÅŸä
                lastNode.connect(analyser);
                lastNode.connect(spectrumAnalyser);
                
                // ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖÿÆÿ±ÿ¨
                analyser.connect(audioContext.destination);
                spectrumAnalyser.connect(audioContext.destination);
                lastNode.connect(audioContext.destination);
                
                // ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿπŸÇÿØ ŸÑŸÑÿ•ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπÿ©
                audioNodes = {
                    source,
                    volumeNode,
                    gainNode,
                    compressorNode,
                    bassBoostNode,
                    reverbNode,
                    dryGain,
                    wetGain,
                    eqFilters
                };
                
                // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿµŸÅŸàŸÅÿßÿ™ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÑÿ™ÿµŸàÿ±
                dataArray = new Uint8Array(analyser.frequencyBinCount);
                spectrumDataArray = new Uint8Array(spectrumAnalyser.frequencyBinCount);
                
                createVisualizerBars();
                isAudioContextInitialized = true;
                
                console.log('‚úÖ ŸÜÿ∏ÿßŸÖ ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿµŸàÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ÿ™ŸÖ ÿ™ŸáŸäÿ¶ÿ™Ÿá ÿ®ŸÜÿ¨ÿßÿ≠');
                
            } catch (error) {
                console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸáŸäÿ¶ÿ© ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿµŸàÿ™:', error);
            }
        }
        
        function createReverbImpulse() {
            const length = audioContext.sampleRate * 2;
            const impulse = audioContext.createBuffer(2, length, audioContext.sampleRate);
            const leftChannel = impulse.getChannelData(0);
            const rightChannel = impulse.getChannelData(1);
            
            for (let i = 0; i < length; i++) {
                const n = i / length;
                leftChannel[i] = (Math.random() * 2 - 1) * Math.pow(1 - n, 3);
                rightChannel[i] = (Math.random() * 2 - 1) * Math.pow(1 - n, 3);
            }
            
            reverbNode.buffer = impulse;
        }
        
        function createEQFilters(context) {
            const filters = [];
            const frequencies = [
                20, 30, 45, 67, 100, 150, 225, 337, 506,
                759, 1138, 1707, 2560, 3840, 5760, 8640,
                12960, 19440, 20000
            ];
            
            for (let i = 0; i < frequencies.length; i++) {
                const filter = context.createBiquadFilter();
                filter.type = 'peaking';
                filter.frequency.value = frequencies[i];
                filter.Q.value = 1;
                filter.gain.value = 0;
                filters.push(filter);
            }
            
            return filters;
        }
        
        function playNextSong() {
            if (songs.length === 0) return;
            
            if (isShuffling) {
                let newIndex;
                do {
                    newIndex = Math.floor(Math.random() * songs.length);
                } while (newIndex === currentSongIndex && songs.length > 1);
                currentSongIndex = newIndex;
            } else {
                currentSongIndex++;
                if (currentSongIndex >= songs.length) {
                    currentSongIndex = 0;
                }
            }
            
            loadSong(currentSongIndex);
            if (isPlaying) {
                audio.play().catch(e => console.log("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ:", e));
            }
            
            updatePlaylistActive();
        }
        
        function loadSong(index) {
            if (index < 0 || index >= songs.length) return;
            
            const song = songs[index];
            
            // ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿµŸàÿ™ ÿßŸÑÿ≠ÿßŸÑŸä ÿ£ŸàŸÑÿßŸã
            audio.pause();
            audio.currentTime = 0;
            
            try {
                audio.src = song.src;
                songTitle.textContent = song.title;
                songArtist.textContent = song.artist;
                
                if (song.cover) {
                    albumImage.src = song.cover;
                } else {
                    albumImage.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240' viewBox='0 0 240 240'%3E%3Cdefs%3E%3CradialGradient id='grad' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' style='stop-color:%234b0082;stop-opacity:1'/%3E%3Cstop offset='100%25' style='stop-color:%238a2be2;stop-opacity:1'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='240' height='240' fill='url(%23grad)'/%3E%3Ccircle cx='120' cy='120' r='80' fill='none' stroke='%23FFD700' stroke-width='3'/%3E%3Ccircle cx='120' cy='120' r='60' fill='none' stroke='%23FFD700' stroke-width='2' opacity='0.7'/%3E%3C/svg%3E";
                }
                
                progress.style.width = '0%';
                currentTimeEl.textContent = '0:00';
                durationEl.textContent = '0:00';
                
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }
                
                if (isPlaying && !isPowerSaveMode) {
                    setTimeout(() => {
                        startVisualizer();
                    }, 100);
                }
            } catch (error) {
                console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ∫ŸÜŸäÿ©:', error);
                alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿµŸàÿ™Ÿä');
            }
        }
        
        function updatePlaylistActive() {
            document.querySelectorAll('.playlist-item').forEach((item, index) => {
                if (index === currentSongIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }
        
        function updateSongsCount() {
            songsCount.textContent = `ÿπÿØÿØ ÿßŸÑÿ£ÿ∫ÿßŸÜŸä: ${songs.length}`;
        }
        
        function startAlbumRotation() {
            if (!isAlbumRotating && !isPowerSaveMode) {
                albumArtContainer.classList.add('rotating');
                isAlbumRotating = true;
            }
        }
        
        function stopAlbumRotation() {
            if (isAlbumRotating) {
                albumArtContainer.classList.remove('rotating');
                isAlbumRotating = false;
            }
        }
        
        function toggleCameraRotation() {
            if (isPowerSaveMode) {
                alert("Ÿàÿ∂ÿπ ÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ∑ÿßŸÇÿ© ŸÖŸÅÿπŸÑ. ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿØŸàÿ±ÿßŸÜ ÿßŸÑŸÉÿßŸÖŸäÿ±ÿß.");
                cameraToggle.classList.remove('active');
                return;
            }
            
            isCameraRotating = !isCameraRotating;
            cameraToggle.classList.toggle('active', isCameraRotating);
            
            if (isCameraRotating) {
                cameraToggle.textContent = 'ÿ•ŸäŸÇÿßŸÅ ÿØŸàÿ±ÿßŸÜ ÿßŸÑŸÉÿßŸÖŸäÿ±ÿß';
                startCameraRotation();
            } else {
                cameraToggle.textContent = 'ÿ™ÿ¥ÿ∫ŸäŸÑ ÿØŸàÿ±ÿßŸÜ ÿßŸÑŸÉÿßŸÖŸäÿ±ÿß';
                if (cameraRotationId) {
                    cancelAnimationFrame(cameraRotationId);
                    cameraRotationId = null;
                }
                document.getElementById('playerSection').style.transform = 'none';
                rotationAngle = 0;
            }
        }
        
        function startCameraRotation() {
            if (!isCameraRotating || isPowerSaveMode) {
                if (cameraRotationId) {
                    cancelAnimationFrame(cameraRotationId);
                    cameraRotationId = null;
                }
                return;
            }
            
            let lastTime = null;
            
            function rotateCamera(timestamp) {
                if (!lastTime) lastTime = timestamp;
                const deltaTime = timestamp - lastTime;
                lastTime = timestamp;
                
                rotationAngle += (deltaTime / 16) * 0.5;
                
                const playerSection = document.getElementById('playerSection');
                if (playerSection) {
                    playerSection.style.transform = `perspective(1200px) rotateY(${rotationAngle}deg) rotateX(5deg)`;
                    playerSection.style.transition = 'transform 0.1s linear';
                }
                
                if (isCameraRotating) {
                    cameraRotationId = requestAnimationFrame(rotateCamera);
                }
            }
            
            cameraRotationId = requestAnimationFrame(rotateCamera);
        }
        
        function createVisualizerBars() {
            visualizer.innerHTML = '';
            bars = [];
            
            const barCount = 64;
            for (let i = 0; i < barCount; i++) {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = '1px';
                visualizer.appendChild(bar);
                bars.push(bar);
            }
        }
        
        async function startVisualizer() {
            if (isPowerSaveMode) return;
            
            if (!isAudioContextInitialized) {
                await initializeAudioProcessing();
            }
            
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
            }
            
            function updateVisualizer() {
                if (!analyser || !dataArray) {
                    animationFrameId = requestAnimationFrame(updateVisualizer);
                    return;
                }
                
                analyser.getByteFrequencyData(dataArray);
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿ¥ÿ±ÿ∑ÿ© ÿßŸÑŸÖÿ≠ŸÑŸÑ ÿßŸÑÿ∑ŸäŸÅŸä
                for (let i = 0; i < bars.length; i++) {
                    const value = dataArray[Math.floor(i * 2.5)];
                    const height = Math.max(2, (value / 256) * 70);
                    bars[i].style.height = `${height}px`;
                    
                    const hue = 280 + (value / 256) * 60;
                    bars[i].style.background = `linear-gradient(to top, hsl(${hue}, 100%, 50%), #00ff7f)`;
                }
                
                let bassSum = 0;
                for (let i = 0; i < 20; i++) {
                    bassSum += dataArray[i];
                }
                const bassPercent = Math.min(100, (bassSum / (20 * 256)) * 100);
                bassLevel.style.width = `${bassPercent}%`;
                
                updateSpectrumDisplay();
                
                animationFrameId = requestAnimationFrame(updateVisualizer);
            }
            
            animationFrameId = requestAnimationFrame(updateVisualizer);
        }
        
        function updateSpectrumDisplay() {
            if (!spectrumAnalyser || !spectrumDataArray) return;
            
            spectrumAnalyser.getByteFrequencyData(spectrumDataArray);
            const canvas = document.getElementById('spectrumCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const gradient = ctx.createLinearGradient(0, 0, width, 0);
            gradient.addColorStop(0, '#8a2be2');
            gradient.addColorStop(0.5, '#00ff7f');
            gradient.addColorStop(1, '#8a2be2');
            
            const barCount = 200;
            const barWidth = (width - 20) / barCount;
            let x = 10;
            
            for (let i = 0; i < barCount; i++) {
                const dataIndex = Math.floor(i * (spectrumDataArray.length / barCount));
                const value = spectrumDataArray[dataIndex];
                
                const barHeight = Math.max(1, (Math.log10(value + 1) / Math.log10(256)) * height * 0.8);
                
                const intensity = value / 256;
                const hue = 280 + intensity * 60;
                ctx.fillStyle = `hsl(${hue}, 100%, ${50 + intensity * 30}%)`;
                
                ctx.fillRect(x, height - barHeight, barWidth - 1, barHeight);
                
                ctx.fillStyle = `rgba(255, 255, 255, ${intensity * 0.3})`;
                ctx.fillRect(x, height - barHeight, barWidth - 1, 2);
                
                x += barWidth;
            }
        }
        
        function formatTime(seconds) {
            if (isNaN(seconds) || seconds === Infinity) return "0:00";
            
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hours > 0) {
                return `${hours}:${minutes < 10 ? '0' : ''}${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            } else {
                return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            }
        }
        
        window.addEventListener('beforeunload', function() {
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            
            if (audioContext) {
                audioContext.close();
            }
            
            objectURLs.forEach(url => {
                try {
                    URL.revokeObjectURL(url);
                } catch (e) {
                    console.warn('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿ±Ÿäÿ± URL:', e);
                }
            });
            objectURLs = [];
            
            if (cameraRotationId) {
                cancelAnimationFrame(cameraRotationId);
            }
        });
        
        let securitySystem;
        
        function initializeSecurity() {
            securitySystem = new PlayerSecurity();
            securitySystem.initialize();
            securitySystem.loadSecurityEvents();
            setupSecurityControls();
        }
        
        class PlayerSecurity {
            constructor() {
                this.sessionId = localStorage.getItem('player_session_id');
                this.sessionToken = localStorage.getItem('player_session_token');
                this.securityEvents = [];
                this.isParanoidMode = false;
                this.securityConfig = {
                    autoScanFiles: true,
                    blockSuspicious: true,
                    logAllEvents: true,
                    enableNotifications: true,
                    maxFileSize: 50 * 1024 * 1024,
                    allowedFormats: ['mp3', 'wav', 'ogg', 'aac', 'flac', 'm4a', 'aiff', 'wma', 'alac']
                };
                
                this.loadConfig();
            }
            
            initialize() {
                if (this.sessionId && this.sessionToken) {
                    this.validateSession();
                } else {
                    this.createSession();
                }
                
                this.setupSecurityListeners();
                this.updateSecurityStatus();
                this.logSecurityEvent('SYSTEM_START', 'ÿ™ŸÖ ÿ™ŸáŸäÿ¶ÿ© ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ£ŸÖÿßŸÜ');
            }
            
            loadConfig() {
                const savedConfig = localStorage.getItem('player_security_config');
                if (savedConfig) {
                    this.securityConfig = {...this.securityConfig, ...JSON.parse(savedConfig)};
                }
            }
            
            saveConfig() {
                localStorage.setItem('player_security_config', JSON.stringify(this.securityConfig));
            }
            
            createSession() {
                this.sessionId = 'session_' + Math.random().toString(36).substr(2, 16);
                this.sessionToken = 'token_' + Math.random().toString(36).substr(2, 32);
                
                localStorage.setItem('player_session_id', this.sessionId);
                localStorage.setItem('player_session_token', this.sessionToken);
                
                this.logSecurityEvent('SESSION_CREATED', 'ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ¨ŸÑÿ≥ÿ© ÿ¨ÿØŸäÿØÿ©');
            }
            
            async validateSession() {
                try {
                    const isValid = true;
                    
                    if (!isValid) {
                        this.clearSession();
                        this.createSession();
                    }
                    
                    return isValid;
                } catch (error) {
                    console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ¨ŸÑÿ≥ÿ©:', error);
                    return false;
                }
            }
            
            clearSession() {
                localStorage.removeItem('player_session_id');
                localStorage.removeItem('player_session_token');
                this.sessionId = null;
                this.sessionToken = null;
                
                this.logSecurityEvent('SESSION_CLEARED', 'ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ¨ŸÑÿ≥ÿ©');
            }
            
            setupSecurityListeners() {
                this.sanitizeInputs();
                
                const fileInput = document.getElementById('fileInput');
                if (fileInput) {
                    fileInput.addEventListener('change', (e) => this.validateUploadedFiles(e));
                }
                
                const imageInput = document.getElementById('imageInput');
                if (imageInput) {
                    imageInput.addEventListener('change', (e) => this.validateImageFile(e));
                }
                
                this.preventCodeInjection();
                this.monitorNetworkRequests();
            }
            
            sanitizeInputs() {
                const inputs = document.querySelectorAll('input[type="text"], input[type="password"], textarea');
                inputs.forEach(input => {
                    input.addEventListener('input', (e) => {
                        e.target.value = this.escapeHtml(e.target.value);
                    });
                });
            }
            
            escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;',
                    '/': '&#x2F;',
                    '`': '&#x60;',
                    '=': '&#x3D;'
                };
                return text.replace(/[&<>"'`=\/]/g, m => map[m]);
            }
            
            async validateUploadedFiles(event) {
                if (!this.securityConfig.autoScanFiles) {
                    return true;
                }
                
                const files = event.target.files;
                const maxSize = this.securityConfig.maxFileSize;
                
                for (let file of files) {
                    if (file.size > maxSize) {
                        this.showSecurityAlert(`ÿßŸÑŸÖŸÑŸÅ ${file.name} ŸÉÿ®Ÿäÿ± ÿ¨ÿØÿßŸã. ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 50MB`);
                        event.target.value = '';
                        this.logSecurityEvent('FILE_REJECTED', `ŸÖŸÑŸÅ ŸÉÿ®Ÿäÿ± ÿ¨ÿØÿßŸã: ${file.name}`);
                        return false;
                    }
                    
                    const fileExt = file.name.split('.').pop().toLowerCase();
                    
                    if (!this.securityConfig.allowedFormats.includes(fileExt)) {
                        this.showSecurityAlert(`ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑŸÖŸÑŸÅ ${file.name} ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ`);
                        event.target.value = '';
                        this.logSecurityEvent('FILE_REJECTED', `ÿ™ŸÜÿ≥ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ: ${file.name}`);
                        return false;
                    }
                    
                    const isValid = await this.scanFile(file);
                    if (!isValid) {
                        this.showSecurityAlert(`ÿßŸÑŸÖŸÑŸÅ ${file.name} Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ¥ÿ®ŸàŸá`);
                        event.target.value = '';
                        this.logSecurityEvent('FILE_BLOCKED', `ŸÖŸÑŸÅ ŸÖÿ¥ÿ®ŸàŸá: ${file.name}`);
                        return false;
                    }
                    
                    this.logSecurityEvent('FILE_ACCEPTED', `ÿ™ŸÖ ŸÅÿ≠ÿµ ÿßŸÑŸÖŸÑŸÅ ÿ®ŸÜÿ¨ÿßÿ≠: ${file.name}`);
                }
                
                return true;
            }
            
            async validateImageFile(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const validImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/svg+xml'];
                
                if (!validImageTypes.includes(file.type)) {
                    this.showSecurityAlert('ŸÜŸàÿπ ÿßŸÑŸÖŸÑŸÅ ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ. Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ©.');
                    event.target.value = '';
                    this.logSecurityEvent('IMAGE_REJECTED', `ŸÜŸàÿπ ÿµŸàÿ±ÿ© ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ: ${file.type}`);
                    return false;
                }
                
                if (file.size > 10 * 1024 * 1024) {
                    this.showSecurityAlert('ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ± ÿ¨ÿØÿßŸã. ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 10MB');
                    event.target.value = '';
                    this.logSecurityEvent('IMAGE_REJECTED', `ÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ±ÿ© ÿ¨ÿØÿßŸã: ${file.name}`);
                    return false;
                }
                
                this.logSecurityEvent('IMAGE_ACCEPTED', `ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑÿµŸàÿ±ÿ©: ${file.name}`);
                return true;
            }
            
            async scanFile(file) {
                return new Promise((resolve) => {
                    if (file.size > this.securityConfig.maxFileSize) {
                        this.logSecurityEvent('FILE_REJECTED', `ŸÖŸÑŸÅ ŸÉÿ®Ÿäÿ± ÿ¨ÿØÿßŸã: ${file.name}`);
                        resolve(false);
                        return;
                    }
                    
                    const fileExt = file.name.split('.').pop().toLowerCase();
                    
                    if (!this.securityConfig.allowedFormats.includes(fileExt)) {
                        this.logSecurityEvent('FILE_REJECTED', `ÿ™ŸÜÿ≥ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ: ${file.name}`);
                        resolve(false);
                        return;
                    }
                    
                    const reader = new FileReader();
                    
                    reader.onload = async (e) => {
                        try {
                            const arrayBuffer = e.target.result;
                            
                            const header = new Uint8Array(arrayBuffer.slice(0, 8));
                            let isValid = this.checkFileSignature(header, fileExt);
                            
                            if (!isValid) {
                                this.logSecurityEvent('FILE_SIGNATURE_MISMATCH', `ÿ™ŸàŸÇŸäÿπ ŸÖŸÑŸÅ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠: ${file.name}`);
                                resolve(false);
                                return;
                            }
                            
                            isValid = await this.checkForMaliciousContent(arrayBuffer);
                            
                            if (!isValid) {
                                this.logSecurityEvent('MALICIOUS_CONTENT', `ÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ¥ÿ®ŸàŸá ŸÅŸä: ${file.name}`);
                                resolve(false);
                                return;
                            }
                            
                            this.logSecurityEvent('FILE_ACCEPTED', `ÿ™ŸÖ ŸÅÿ≠ÿµ ÿßŸÑŸÖŸÑŸÅ ÿ®ŸÜÿ¨ÿßÿ≠: ${file.name}`);
                            resolve(true);
                            
                        } catch (error) {
                            this.logSecurityEvent('FILE_SCAN_ERROR', `ÿÆÿ∑ÿ£ ŸÅŸä ŸÅÿ≠ÿµ ÿßŸÑŸÖŸÑŸÅ: ${file.name} - ${error.message}`);
                            resolve(false);
                        }
                    };
                    
                    reader.onerror = () => {
                        this.logSecurityEvent('FILE_READ_ERROR', `ÿÆÿ∑ÿ£ ŸÅŸä ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÖŸÑŸÅ: ${file.name}`);
                        resolve(false);
                    };
                    
                    reader.readAsArrayBuffer(file.slice(0, 65536));
                });
            }
            
            checkFileSignature(header, fileExt) {
                const signatures = {
                    'mp3': [[0x49, 0x44, 0x33], [0xFF, 0xFB]],
                    'wav': [0x52, 0x49, 0x46, 0x46],
                    'ogg': [0x4F, 0x67, 0x67, 0x53],
                    'flac': [0x66, 0x4C, 0x61, 0x43],
                    'm4a': [0x66, 0x74, 0x79, 0x70],
                    'aiff': [0x46, 0x4F, 0x52, 0x4D]
                };
                
                if (!signatures[fileExt]) return true;
                
                const sig = signatures[fileExt];
                if (Array.isArray(sig[0])) {
                    return sig.some(s => s.every((byte, i) => header[i] === byte));
                } else {
                    return sig.every((byte, i) => header[i] === byte);
                }
            }
            
            async checkForMaliciousContent(arrayBuffer) {
                try {
                    const textDecoder = new TextDecoder('utf-8');
                    const text = textDecoder.decode(arrayBuffer);
                    
                    const suspiciousPatterns = [
                        /<script[^>]*>/i,
                        /eval\s*\(/i,
                        /exec\s*\(/i,
                        /system\s*\(/i,
                        /\.\.\//,
                        /\.\.\\/,
                        /\/etc\/passwd/,
                        /cmd\.exe/i,
                        /powershell/i,
                        /wscript\.shell/i,
                        /onerror\s*=/i,
                        /onload\s*=/i,
                        /javascript:/i
                    ];
                    
                    for (let pattern of suspiciousPatterns) {
                        if (pattern.test(text)) {
                            return false;
                        }
                    }
                    
                    return true;
                } catch (e) {
                    console.warn('ÿÆÿ∑ÿ£ ŸÅŸä ŸÅÿ≠ÿµ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ:', e);
                    return true;
                }
            }
            
            preventCodeInjection() {
                const originalLog = console.log;
                const originalError = console.error;
                
                console.log = function(...args) {
                    originalLog.apply(console, args);
                };
                
                console.error = function(...args) {
                    originalError.apply(console, args);
                };
            }
            
            monitorNetworkRequests() {
                const originalFetch = window.fetch;
                
                window.fetch = async function(...args) {
                    try {
                        const response = await originalFetch.apply(this, args);
                        
                        const url = typeof args[0] === 'string' ? args[0] : args[0].url;
                        if (url && !url.startsWith(window.location.origin) && !url.startsWith('/')) {
                            securitySystem.logSecurityEvent('EXTERNAL_REQUEST', `ÿ∑ŸÑÿ® ÿ•ŸÑŸâ: ${url}`);
                        }
                        
                        return response;
                    } catch (error) {
                        securitySystem.logSecurityEvent('NETWORK_ERROR', `ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ¥ÿ®ŸÉÿ©: ${error.message}`);
                        throw error;
                    }
                };
            }
            
            updateSecurityStatus() {
                const indicators = {
                    encryptionStatus: '‚úì ŸÖŸÅÿπŸÑ',
                    fileScanStatus: this.securityConfig.autoScanFiles ? '‚úì ŸÖŸÅÿπŸÑ' : '‚úó ŸÖÿπÿ∑ŸÑ',
                    xssProtectionStatus: '‚úì ŸÖŸÅÿπŸÑ',
                    csrfProtectionStatus: '‚úì ŸÖŸÅÿπŸÑ'
                };
                
                Object.keys(indicators).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = indicators[id];
                    }
                });
            }
            
            logSecurityEvent(eventType, details) {
                if (!this.securityConfig.logAllEvents && eventType !== 'CRITICAL') {
                    return;
                }
                
                const event = {
                    timestamp: new Date().toLocaleString('ar-EG'),
                    type: eventType,
                    details: details,
                    severity: this.calculateSeverity(eventType)
                };
                
                this.securityEvents.unshift(event);
                
                if (this.securityEvents.length > 50) {
                    this.securityEvents = this.securityEvents.slice(0, 50);
                }
                
                this.updateSecurityLogs();
                
                if (this.securityConfig.enableNotifications && event.severity === 'HIGH') {
                    this.showSecurityNotification(event);
                }
                
                this.saveSecurityEvents();
            }
            
            calculateSeverity(eventType) {
                const severityMap = {
                    'SYSTEM_START': 'INFO',
                    'SESSION_CREATED': 'INFO',
                    'SESSION_CLEARED': 'WARNING',
                    'FILE_ACCEPTED': 'INFO',
                    'IMAGE_ACCEPTED': 'INFO',
                    'FILE_REJECTED': 'WARNING',
                    'IMAGE_REJECTED': 'WARNING',
                    'FILE_BLOCKED': 'HIGH',
                    'MALICIOUS_CONTENT': 'CRITICAL',
                    'FILE_SIGNATURE_MISMATCH': 'HIGH',
                    'FILE_READ_ERROR': 'WARNING',
                    'EXTERNAL_REQUEST': 'INFO',
                    'NETWORK_ERROR': 'WARNING',
                    'SECURITY_SCAN': 'INFO',
                    'PARANOID_MODE': 'HIGH'
                };
                
                return severityMap[eventType] || 'INFO';
            }
            
            updateSecurityLogs() {
                const logsContainer = document.getElementById('securityLogs');
                if (!logsContainer) return;
                
                logsContainer.innerHTML = '';
                
                this.securityEvents.slice(0, 10).forEach(event => {
                    const logEntry = document.createElement('div');
                    logEntry.className = `log-entry severity-${event.severity.toLowerCase()}`;
                    logEntry.innerHTML = `
                        <span class="log-time">[${event.timestamp}]</span>
                        <span class="log-type">${event.type}</span>
                        <span class="log-details">${event.details}</span>
                    `;
                    
                    logEntry.style.cssText = `
                        padding: 5px;
                        margin-bottom: 3px;
                        border-left: 3px solid ${this.getSeverityColor(event.severity)};
                        background: rgba(30, 30, 30, 0.5);
                        font-family: monospace;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        flex-wrap: wrap;
                    `;
                    
                    logsContainer.appendChild(logEntry);
                });
            }
            
            getSeverityColor(severity) {
                switch(severity) {
                    case 'CRITICAL': return '#ff4444';
                    case 'HIGH': return '#ff8800';
                    case 'WARNING': return '#ffbb33';
                    case 'INFO': return '#00C851';
                    default: return '#33b5e5';
                }
            }
            
            saveSecurityEvents() {
                try {
                    localStorage.setItem('player_security_events', JSON.stringify(this.securityEvents.slice(0, 100)));
                } catch (e) {
                    console.warn('ŸÑÿß ŸäŸÖŸÉŸÜ ÿ≠ŸÅÿ∏ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ£ŸÖŸÜŸäÿ©:', e);
                }
            }
            
            loadSecurityEvents() {
                try {
                    const savedEvents = localStorage.getItem('player_security_events');
                    if (savedEvents) {
                        this.securityEvents = JSON.parse(savedEvents);
                        this.updateSecurityLogs();
                    }
                } catch (e) {
                    console.warn('ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ£ŸÖŸÜŸäÿ©:', e);
                }
            }
            
            showSecurityAlert(message) {
                if (this.isParanoidMode) {
                    this.createSecurityAlert(message);
                } else {
                    alert(`‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá ÿ£ŸÖŸÜŸä:\n${message}`);
                }
            }
            
            createSecurityAlert(message) {
                const alertDiv = document.createElement('div');
                alertDiv.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(145deg, #8B0000, #660000);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    border: 2px solid #FFD700;
                    z-index: 10000;
                    max-width: 400px;
                    box-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
                    animation: slideIn 0.3s ease;
                `;
                
                alertDiv.innerHTML = `
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <span style="font-size: 24px; margin-right: 10px;">üö®</span>
                        <strong>ÿ™ŸÜÿ®ŸäŸá ÿ£ŸÖŸÜŸä ÿπÿßŸÑŸä!</strong>
                    </div>
                    <div style="margin-bottom: 10px;">${message}</div>
                    <button onclick="this.parentElement.remove()" style="
                        background: rgba(255, 255, 255, 0.2);
                        border: 1px solid white;
                        color: white;
                        padding: 5px 15px;
                        border-radius: 5px;
                        cursor: pointer;
                        float: right;
                    ">ÿ≠ÿ≥ŸÜÿßŸã</button>
                `;
                
                document.body.appendChild(alertDiv);
                
                setTimeout(() => {
                    if (alertDiv.parentElement) {
                        alertDiv.remove();
                    }
                }, 10000);
            }
            
            showSecurityNotification(event) {
                if (!("Notification" in window)) return;
                
                if (Notification.permission === "granted") {
                    new Notification("üîí ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä - ÿ™ŸÜÿ®ŸäŸá ÿ£ŸÖŸÜŸä", {
                        body: `${event.type}: ${event.details}`,
                        icon: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFD700'%3E%3Cpath d='M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z'/%3E%3C/svg%3E"
                    });
                }
            }
            
            clearCache() {
                localStorage.clear();
                sessionStorage.clear();
                
                this.securityConfig = {
                    autoScanFiles: true,
                    blockSuspicious: true,
                    logAllEvents: true,
                    enableNotifications: true,
                    maxFileSize: 50 * 1024 * 1024,
                    allowedFormats: ['mp3', 'wav', 'ogg', 'aac', 'flac', 'm4a', 'aiff', 'wma', 'alac']
                };
                
                this.saveConfig();
                this.createSession();
                
                this.logSecurityEvent('CACHE_CLEARED', 'ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©');
                this.showSecurityAlert('ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ© Ÿàÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™');
                this.updateSecurityStatus();
            }
            
            scanForThreats() {
                this.logSecurityEvent('SECURITY_SCAN', 'ÿ®ÿØÿ° ŸÅÿ≠ÿµ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ®ÿ≠ÿ´ÿßŸã ÿπŸÜ ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™');
                
                setTimeout(() => {
                    const threatsFound = Math.random() < 0.1;
                    if (threatsFound) {
                        this.showSecurityAlert('ÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿ™ŸáÿØŸäÿØÿßÿ™ ŸÖÿ≠ÿ™ŸÖŸÑÿ© ŸÅŸä ÿßŸÑŸÜÿ∏ÿßŸÖ. ŸäŸàÿµŸâ ÿ®ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©.');
                        this.logSecurityEvent('THREATS_DETECTED', 'ÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿ™ŸáÿØŸäÿØÿßÿ™ ÿÆŸÑÿßŸÑ ÿßŸÑŸÅÿ≠ÿµ');
                    } else {
                        this.showSecurityAlert('ÿßŸÑŸÅÿ≠ÿµ ÿßŸÉÿ™ŸÖŸÑ: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿ£Ÿä ÿ™ŸáÿØŸäÿØÿßÿ™. ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ¢ŸÖŸÜ.');
                        this.logSecurityEvent('SCAN_CLEAN', 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿ™ŸáÿØŸäÿØÿßÿ™');
                    }
                }, 2000);
            }
            
            generateSecurityReport() {
                const report = `
        ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ£ŸÖÿßŸÜ - ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä ÿßŸÑŸÅÿßÿÆÿ±
        =====================================
        ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°: ${new Date().toLocaleDateString('ar-EG')}
        ŸàŸÇÿ™ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°: ${new Date().toLocaleTimeString('ar-EG')}

        ÿ≠ÿßŸÑÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ:
        -----------
        ‚Ä¢ ÿ™ÿ¥ŸÅŸäÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ: ‚úì ŸÖŸÅÿπŸÑ
        ‚Ä¢ ŸÅÿ≠ÿµ ÿßŸÑŸÖŸÑŸÅÿßÿ™: ${this.securityConfig.autoScanFiles ? '‚úì ŸÖŸÅÿπŸÑ' : '‚úó ŸÖÿπÿ∑ŸÑ'}
        ‚Ä¢ ÿ≠ŸÖÿßŸäÿ© XSS: ‚úì ŸÖŸÅÿπŸÑ
        ‚Ä¢ ÿ≠ŸÖÿßŸäÿ© CSRF: ‚úì ŸÖŸÅÿπŸÑ
        ‚Ä¢ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ: ${this.isParanoidMode ? '‚úì ŸÖŸÅÿπŸÑ' : '‚úó ŸÖÿπÿ∑ŸÑ'}

        ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™:
        ----------
        ‚Ä¢ ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ≠ÿØÿßÿ´: ${this.securityEvents.length}
        ‚Ä¢ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ≠ÿ±ÿ¨ÿ©: ${this.securityEvents.filter(e => e.severity === 'CRITICAL').length}
        ‚Ä¢ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿπÿßŸÑŸäÿ©: ${this.securityEvents.filter(e => e.severity === 'HIGH').length}
        ‚Ä¢ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ™ÿ≠ÿ∞Ÿäÿ±Ÿäÿ©: ${this.securityEvents.filter(e => e.severity === 'WARNING').length}
        ‚Ä¢ ÿ¨ŸÑÿ≥ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ: ${this.sessionId ? 'ŸÜÿ¥ÿ∑ÿ©' : 'ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑ÿ©'}

        ÿßŸÑÿ™ŸàÿµŸäÿßÿ™:
        ---------
        ${this.getSecurityRecommendations()}

        ÿ¢ÿÆÿ± 5 ÿ£ÿ≠ÿØÿßÿ´:
        ------------
        ${this.securityEvents.slice(0, 5).map(e => `[${e.timestamp}] ${e.type}: ${e.details}`).join('\n')}

        =====================================
        ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ®Ÿàÿßÿ≥ÿ∑ÿ© ŸÜÿ∏ÿßŸÖ ÿ£ŸÖÿßŸÜ ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä
                `;
                
                const reportWindow = window.open();
                reportWindow.document.write(`
                    <html dir="rtl">
                    <head>
                        <title>ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ£ŸÖÿßŸÜ - ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä</title>
                        <style>
                            body {
                                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                line-height: 1.6;
                                margin: 20px;
                                background: #0a0a0a;
                                color: #e0e0e0;
                            }
                            pre {
                                white-space: pre-wrap;
                                word-wrap: break-word;
                                background: #1a1a1a;
                                padding: 20px;
                                border-radius: 10px;
                                border: 1px solid rgba(255, 215, 0, 0.3);
                                direction: ltr;
                                text-align: left;
                            }
                            h1 {
                                color: #FFD700;
                                text-align: center;
                                border-bottom: 2px solid rgba(255, 215, 0, 0.5);
                                padding-bottom: 10px;
                            }
                        </style>
                    </head>
                    <body>
                        <h1>ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ£ŸÖÿßŸÜ - ÿßŸÑŸÖÿ¥ÿ∫ŸÑ ÿßŸÑÿ∞Ÿáÿ®Ÿä ÿßŸÑŸÅÿßÿÆÿ±</h1>
                        <pre>${report}</pre>
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="window.print()" style="
                                background: linear-gradient(135deg, #8a2be2, #9400d3);
                                color: #FFD700;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 5px;
                                cursor: pointer;
                                font-weight: bold;
                            ">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ© ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</button>
                        </div>
                    </body>
                    </html>
                `);
                
                this.logSecurityEvent('REPORT_GENERATED', 'ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ™ŸÇÿ±Ÿäÿ± ÿ£ŸÖŸÜŸä');
            }
            
            getSecurityRecommendations() {
                const recommendations = [];
                
                if (!this.securityConfig.autoScanFiles) {
                    recommendations.push('‚Ä¢ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑŸÖŸÑŸÅÿßÿ™');
                }
                
                if (!this.securityConfig.blockSuspicious) {
                    recommendations.push('‚Ä¢ ÿ™ŸÅÿπŸäŸÑ ŸÖŸÜÿπ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÖÿ¥ÿ®ŸàŸáÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã');
                }
                
                if (this.securityEvents.filter(e => e.severity === 'CRITICAL').length > 0) {
                    recommendations.push('‚Ä¢ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ≠ÿ±ÿ¨ÿ© ŸàÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÖÿµÿØÿ±Ÿáÿß');
                }
                
                if (!this.isParanoidMode) {
                    recommendations.push('‚Ä¢ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ ŸÑÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ≠ŸÖÿßŸäÿ©');
                }
                
                if (recommendations.length === 0) {
                    recommendations.push('‚Ä¢ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ© ŸÖÿ´ÿßŸÑŸäÿ©. ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿ∏ÿßŸÖ');
                }
                
                return recommendations.join('\n');
            }
            
            enableParanoidMode() {
                this.isParanoidMode = true;
                
                this.securityConfig.autoScanFiles = true;
                this.securityConfig.blockSuspicious = true;
                this.securityConfig.logAllEvents = true;
                this.securityConfig.enableNotifications = true;
                
                this.saveConfig();
                this.createParanoidOverlay();
                this.enhanceSecurity();
                
                this.logSecurityEvent('PARANOID_MODE', 'ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ');
                this.updateSecurityStatus();
            }
            
            createParanoidOverlay() {
                const overlay = document.createElement('div');
                overlay.id = 'paranoidOverlay';
                overlay.className = 'paranoid-overlay';
                
                overlay.innerHTML = `
                    <div style="margin-bottom: 30px;">
                        <div style="font-size: 48px; margin-bottom: 20px; animation: spin 4s linear infinite;">üõ°Ô∏è</div>
                        <h1>ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ ŸÖŸÅÿπŸÑ</h1>
                        <p style="font-size: 18px; color: #e0e0e0; margin-top: 20px; max-width: 600px;">
                            ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ© ÿ™ÿπŸÖŸÑ ÿ®ÿ£ŸÇÿµŸâ ÿ∑ÿßŸÇÿ™Ÿáÿß.<br>
                            ÿ™ŸÖ ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ≠ŸÖÿßŸäÿ© ÿ∂ÿØ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™ ÿßŸÑŸÖÿπÿ±ŸàŸÅÿ©.<br>
                            <span style="font-size: 14px; opacity: 0.8;">(ÿ≥Ÿäÿ™ŸÖ ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑŸÖÿ±ÿ¶Ÿäÿ© ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ£ÿØÿßÿ°)</span>
                        </p>
                    </div>
                    <button onclick="securitySystem.disableParanoidMode()" class="disable-paranoid-btn">
                        ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ
                    </button>
                `;
                
                document.body.appendChild(overlay);
                this.disableVisualEffects();
            }
            
            disableVisualEffects() {
                const stars = document.querySelector('.stars-background');
                if (stars) stars.style.display = 'none';
                
                const lights = document.querySelectorAll('.light-effect, .light-spot');
                lights.forEach(light => light.style.display = 'none');
                
                const albumContainer = document.getElementById('albumArtContainer');
                if (albumContainer) albumContainer.classList.remove('rotating');
                
                const powerSaveBtn = document.getElementById('powerSaveBtn');
                if (powerSaveBtn && !document.body.classList.contains('power-save-mode')) {
                    powerSaveBtn.click();
                }
            }
            
            enableVisualEffects() {
                const stars = document.querySelector('.stars-background');
                if (stars) stars.style.display = 'block';
                
                const lights = document.querySelectorAll('.light-effect, .light-spot');
                lights.forEach(light => light.style.display = 'block');
            }
            
            enhanceSecurity() {
                const fileInput = document.getElementById('fileInput');
                if (fileInput) {
                    fileInput.setAttribute('accept', '.mp3,.wav,.ogg,.aac,.flac,.m4a');
                }
                
                document.addEventListener('click', (e) => {
                    const link = e.target.closest('a');
                    if (link && link.href && !link.href.startsWith(window.location.origin)) {
                        e.preventDefault();
                        this.showSecurityAlert('ÿ™ŸÖ ŸÖŸÜÿπ ŸÅÿ™ÿ≠ ÿ±ÿßÿ®ÿ∑ ÿÆÿßÿ±ÿ¨Ÿä ŸÑÿ£ÿ≥ÿ®ÿßÿ® ÿ£ŸÖŸÜŸäÿ©');
                        this.logSecurityEvent('EXTERNAL_LINK_BLOCKED', `ÿ±ÿßÿ®ÿ∑ ÿÆÿßÿ±ÿ¨Ÿä: ${link.href}`);
                    }
                }, true);
            }
            
            disableParanoidMode() {
                this.isParanoidMode = false;
                
                const overlay = document.getElementById('paranoidOverlay');
                if (overlay) overlay.remove();
                
                this.enableVisualEffects();
                this.logSecurityEvent('PARANOID_MODE_DISABLED', 'ÿ™ŸÖ ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ');
                this.updateSecurityStatus();
            }
        }
        
        function setupSecurityControls() {
            const securityBtn = document.getElementById('securityBtn');
            const securityModal = document.getElementById('securityModal');
            const closeSecurityModal = document.getElementById('closeSecurityModal');
            
            if (securityBtn && securityModal) {
                securityBtn.addEventListener('click', () => {
                    securityModal.style.display = 'flex';
                    securitySystem.updateSecurityLogs();
                });
            }
            
            if (closeSecurityModal) {
                closeSecurityModal.addEventListener('click', () => {
                    securityModal.style.display = 'none';
                });
            }
            
            if (securityModal) {
                securityModal.addEventListener('click', (e) => {
                    if (e.target === securityModal) {
                        securityModal.style.display = 'none';
                    }
                });
            }
            
            const autoScanCheckbox = document.getElementById('autoScanFiles');
            const blockSuspiciousCheckbox = document.getElementById('blockSuspicious');
            const logAllEventsCheckbox = document.getElementById('logAllEvents');
            const enableNotificationsCheckbox = document.getElementById('enableNotifications');
            
            if (autoScanCheckbox) {
                autoScanCheckbox.checked = securitySystem.securityConfig.autoScanFiles;
                autoScanCheckbox.addEventListener('change', (e) => {
                    securitySystem.securityConfig.autoScanFiles = e.target.checked;
                    securitySystem.saveConfig();
                    securitySystem.updateSecurityStatus();
                });
            }
            
            if (blockSuspiciousCheckbox) {
                blockSuspiciousCheckbox.checked = securitySystem.securityConfig.blockSuspicious;
                blockSuspiciousCheckbox.addEventListener('change', (e) => {
                    securitySystem.securityConfig.blockSuspicious = e.target.checked;
                    securitySystem.saveConfig();
                    securitySystem.updateSecurityStatus();
                });
            }
            
            if (logAllEventsCheckbox) {
                logAllEventsCheckbox.checked = securitySystem.securityConfig.logAllEvents;
                logAllEventsCheckbox.addEventListener('change', (e) => {
                    securitySystem.securityConfig.logAllEvents = e.target.checked;
                    securitySystem.saveConfig();
                });
            }
            
            if (enableNotificationsCheckbox) {
                enableNotificationsCheckbox.checked = securitySystem.securityConfig.enableNotifications;
                enableNotificationsCheckbox.addEventListener('change', (e) => {
                    securitySystem.securityConfig.enableNotifications = e.target.checked;
                    securitySystem.saveConfig();
                    
                    if (e.target.checked && "Notification" in window && Notification.permission === "default") {
                        Notification.requestPermission();
                    }
                });
            }
            
            const clearCacheBtn = document.getElementById('clearCacheBtn');
            const scanThreatsBtn = document.getElementById('scanThreatsBtn');
            const generateReportBtn = document.getElementById('generateReportBtn');
            const paranoidModeBtn = document.getElementById('paranoidModeBtn');
            
            if (clearCacheBtn) {
                clearCacheBtn.addEventListener('click', () => {
                    if (confirm('ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©ÿü')) {
                        securitySystem.clearCache();
                    }
                });
            }
            
            if (scanThreatsBtn) {
                scanThreatsBtn.addEventListener('click', () => securitySystem.scanForThreats());
            }
            
            if (generateReportBtn) {
                generateReportBtn.addEventListener('click', () => securitySystem.generateSecurityReport());
            }
            
            if (paranoidModeBtn) {
                paranoidModeBtn.addEventListener('click', () => {
                    if (confirm('ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜ ÿ≥Ÿäÿπÿ≤ÿ≤ ÿßŸÑÿ≠ŸÖÿßŸäÿ© ŸàŸÑŸÉŸÜ ŸÇÿØ Ÿäÿ§ÿ´ÿ± ÿπŸÑŸâ ÿßŸÑÿ£ÿØÿßÿ°. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü')) {
                        securitySystem.enableParanoidMode();
                    }
                });
            }
        }
        
        function initializeAdvancedControls() {
            // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿπÿßÿØŸÑ EQ ŸÖÿπ 18 ŸÜÿ∑ÿßŸÇÿßŸã
            const eqBandsContainer = document.getElementById('eqBands');
            
            // 18 ÿ™ÿ±ÿØÿØ ŸÖŸÜ 20Hz ÿ•ŸÑŸâ 20kHz (ŸÑŸàÿ∫ÿßÿ±Ÿäÿ™ŸÖŸä)
            const frequencies = [
                20, 30, 45, 67, 100, 150, 225, 337, 506,
                759, 1138, 1707, 2560, 3840, 5760, 8640,
                12960, 19440, 20000
            ];
            
            const frequencyLabels = [
                "20Hz", "30Hz", "45Hz", "67Hz", "100Hz", "150Hz", 
                "225Hz", "337Hz", "506Hz", "759Hz", "1.1kHz", 
                "1.7kHz", "2.6kHz", "3.8kHz", "5.8kHz", "8.6kHz",
                "13kHz", "19kHz", "20kHz"
            ];
            
            if (eqBandsContainer) {
                eqBandsContainer.innerHTML = '';
                eqBandsContainer.style.minWidth = frequencies.length * 45 + 'px';
                
                for (let i = 0; i < frequencies.length; i++) {
                    const eqBand = document.createElement('div');
                    eqBand.className = 'eq-band';
                    eqBand.style.minWidth = '40px';
                    
                    const slider = document.createElement('input');
                    slider.type = 'range';
                    slider.className = 'eq-slider';
                    slider.min = '-12';
                    slider.max = '12';
                    slider.value = '0';
                    slider.setAttribute('orient', 'vertical');
                    slider.style.webkitAppearance = 'slider-vertical';
                    slider.style.height = '120px';
                    slider.style.width = '20px';
                    slider.dataset.freq = frequencies[i];
                    slider.dataset.index = i;
                    
                    const freq = document.createElement('div');
                    freq.className = 'eq-freq';
                    freq.textContent = frequencyLabels[i];
                    freq.style.fontSize = '9px';
                    freq.style.marginTop = '5px';
                    
                    const value = document.createElement('div');
                    value.className = 'eq-value';
                    value.textContent = '0dB';
                    value.id = `eqValue${i}`;
                    value.style.fontSize = '9px';
                    value.style.marginTop = '5px';
                    
                    slider.addEventListener('input', function() {
                        const index = parseInt(this.dataset.index);
                        const gainValue = parseFloat(this.value);
                        value.textContent = `${gainValue}dB`;
                        
                        // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ±ÿ¥ÿ≠ ÿßŸÑŸÖÿπÿßÿØŸÑ ÿßŸÑÿ≠ŸÇŸäŸÇŸä
                        updateEQ(index, gainValue);
                        
                        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑŸàŸÜ ÿ≠ÿ≥ÿ® ÿßŸÑŸÇŸäŸÖÿ©
                        if (gainValue > 0) {
                            this.style.background = `linear-gradient(to top, #00ff7f ${(gainValue/12)*100}%, #1a1a1a ${(gainValue/12)*100}%)`;
                        } else {
                            this.style.background = `linear-gradient(to top, #1a1a1a ${100 - (Math.abs(gainValue)/12)*100}%, #ff1493 ${100 - (Math.abs(gainValue)/12)*100}%)`;
                        }
                    });
                    
                    // ÿ™ŸÑŸàŸäŸÜ ÿßÿ®ÿ™ÿØÿßÿ¶Ÿä
                    slider.style.background = 'linear-gradient(to top, #1a1a1a 50%, #1a1a1a 50%)';
                    
                    eqBand.appendChild(slider);
                    eqBand.appendChild(freq);
                    eqBand.appendChild(value);
                    
                    eqBandsContainer.appendChild(eqBand);
                }
            }
            
            // ÿ•ŸÜÿ¥ÿßÿ° ÿπÿ±ÿ∂ ÿßŸÑÿ∑ŸäŸÅ ÿßŸÑÿ≠ŸÇŸäŸÇŸä
            const spectrumDisplay = document.getElementById('spectrumDisplay');
            if (spectrumDisplay) {
                const canvas = document.createElement('canvas');
                canvas.id = 'spectrumCanvas';
                canvas.width = 800;
                canvas.height = 100;
                spectrumDisplay.appendChild(canvas);
            }
            
            // ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ≥ŸÑÿßŸäÿØÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
            const volumeEnhancementSlider = document.getElementById('volumeEnhancementSlider');
            const volumeValue = document.getElementById('volumeValue');
            const boostEnhancementSlider = document.getElementById('boostEnhancementSlider');
            const boostValue = document.getElementById('boostValue');
            const boostIndicator = document.getElementById('boostIndicator');
            const bassEnhancementSlider = document.getElementById('bassEnhancementSlider');
            const bassValue = document.getElementById('bassValue');
            const qualityValue = document.getElementById('qualityValue');
            const qualityLevel = document.getElementById('qualityLevel');
            
            if (volumeEnhancementSlider && volumeValue) {
                volumeEnhancementSlider.addEventListener('input', function() {
                    volumeValue.textContent = `${this.value}%`;
                    if (window.player && window.player.audio) {
                        window.player.audio.volume = this.value / 100;
                    }
                });
            }
            
            if (boostEnhancementSlider && boostValue && boostIndicator) {
                boostEnhancementSlider.addEventListener('input', function() {
                    boostValue.textContent = `${this.value}%`;
                    const boostFactor = 1 + (this.value / 100);
                    boostIndicator.textContent = `x${boostFactor.toFixed(1)}`;
                });
            }
            
            if (bassEnhancementSlider && bassValue) {
                bassEnhancementSlider.addEventListener('input', function() {
                    bassValue.textContent = `${this.value}%`;
                });
            }
            
            // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ¨ŸàÿØÿ©
            const audioQuality = document.getElementById('audioQuality');
            if (audioQuality) {
                audioQuality.addEventListener('change', function() {
                    switch(this.value) {
                        case 'standard':
                            qualityValue.textContent = 'ŸÇŸäÿßÿ≥Ÿä';
                            qualityLevel.style.width = '60%';
                            break;
                        case 'high':
                            qualityValue.textContent = 'ÿπÿßŸÑŸäÿ©';
                            qualityLevel.style.width = '80%';
                            break;
                        case 'hd':
                            qualityValue.textContent = 'ÿπÿßŸÑŸäÿ© ÿßŸÑÿØŸÇÿ©';
                            qualityLevel.style.width = '90%';
                            break;
                    }
                });
            }
            
            // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿßÿ™
            document.querySelectorAll('.enhancement-preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.enhancement-preset-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const preset = this.dataset.preset;
                    
                    switch(preset) {
                        case 'normal':
                            volumeEnhancementSlider.value = 70;
                            boostEnhancementSlider.value = 0;
                            bassEnhancementSlider.value = 0;
                            volumeValue.textContent = '70%';
                            boostValue.textContent = '0%';
                            bassValue.textContent = '0%';
                            boostIndicator.textContent = 'x1.0';
                            break;
                        case 'boost':
                            volumeEnhancementSlider.value = 80;
                            boostEnhancementSlider.value = 50;
                            bassEnhancementSlider.value = 30;
                            volumeValue.textContent = '80%';
                            boostValue.textContent = '50%';
                            bassValue.textContent = '30%';
                            boostIndicator.textContent = 'x1.5';
                            break;
                        case 'bass':
                            volumeEnhancementSlider.value = 75;
                            boostEnhancementSlider.value = 20;
                            bassEnhancementSlider.value = 70;
                            volumeValue.textContent = '75%';
                            boostValue.textContent = '20%';
                            bassValue.textContent = '70%';
                            boostIndicator.textContent = 'x1.2';
                            break;
                        case 'clear':
                            volumeEnhancementSlider.value = 65;
                            boostEnhancementSlider.value = 10;
                            bassEnhancementSlider.value = 10;
                            volumeValue.textContent = '65%';
                            boostValue.textContent = '10%';
                            bassValue.textContent = '10%';
                            boostIndicator.textContent = 'x1.1';
                            break;
                    }
                });
            });
            
            // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿπÿßÿØŸÑ ÿßŸÑŸÖÿ≥ÿ®ŸÇÿ©
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const preset = this.dataset.preset;
                    
                    const presets = {
                        flat: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        bass: [6, 4, 2, 1, 0, -1, -2, -3, -4, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4],
                        vocal: [-2, -1, 0, 1, 2, 3, 2, 1, 0, -1, -2, -1, 0, 1, 2, 3, 2, 1, 0],
                        acoustic: [2, 1, 0, -1, 0, 1, 2, 3, 2, 1, 0, -1, 0, 1, 2, 3, 2, 1, 0],
                        rock: [4, 3, 2, 1, 0, -1, 0, 1, 2, 3, 4, 3, 2, 1, 0, -1, 0, 1, 2],
                        jazz: [1, 0, -1, -2, -1, 0, 1, 2, 3, 2, 1, 0, -1, -2, -1, 0, 1, 2, 3],
                        classical: [0, -1, -2, -1, 0, 1, 2, 3, 4, 3, 2, 1, 0, -1, -2, -1, 0, 1, 2],
                        electronic: [3, 2, 1, 0, -1, 0, 1, 2, 3, 4, 3, 2, 1, 0, -1, 0, 1, 2, 3],
                        hardstyle: [5, 4, 3, 2, 1, 0, -1, -2, -3, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5]
                    };
                    
                    if (presets[preset]) {
                        const sliders = document.querySelectorAll('.eq-slider');
                        for (let i = 0; i < sliders.length; i++) {
                            sliders[i].value = presets[preset][i];
                            document.getElementById(`eqValue${i}`).textContent = `${presets[preset][i]}dB`;
                            
                            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑŸàŸÜ
                            const gainValue = presets[preset][i];
                            if (gainValue > 0) {
                                sliders[i].style.background = `linear-gradient(to top, #00ff7f ${(gainValue/12)*100}%, #1a1a1a ${(gainValue/12)*100}%)`;
                            } else {
                                sliders[i].style.background = `linear-gradient(to top, #1a1a1a ${100 - (Math.abs(gainValue)/12)*100}%, #ff1493 ${100 - (Math.abs(gainValue)/12)*100}%)`;
                            }
                            
                            // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ±ÿ¥ÿ≠ ÿßŸÑŸÖÿπÿßÿØŸÑ ÿßŸÑÿ≠ŸÇŸäŸÇŸä
                            updateEQ(i, gainValue);
                        }
                    }
                });
            });
            
            // ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ
            const playbackSpeed = document.getElementById('playbackSpeed');
            const speedValue = document.getElementById('speedValue');
            
            if (playbackSpeed && speedValue) {
                playbackSpeed.addEventListener('input', function() {
                    const speed = this.value / 100;
                    if (window.player && window.player.audio) {
                        window.player.audio.playbackRate = speed;
                    }
                    speedValue.textContent = `${this.value}%`;
                });
            }
            
            // ÿßŸÑÿµÿØŸâ
            const reverb = document.getElementById('reverb');
            const reverbValue = document.getElementById('reverbValue');
            
            if (reverb && reverbValue) {
                reverb.addEventListener('input', function() {
                    reverbValue.textContent = `${this.value}%`;
                });
            }
            
            // ÿßŸÑÿ™ÿØÿßÿÆŸÑ
            const crossfade = document.getElementById('crossfade');
            const crossfadeValue = document.getElementById('crossfadeValue');
            
            if (crossfade && crossfadeValue) {
                crossfade.addEventListener('input', function() {
                    crossfadeValue.textContent = `${this.value} ÿ´ÿßŸÜŸäÿ©`;
                });
            }
            
            // ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
            const shortcutsBtn = document.getElementById('shortcutsBtn');
            const shortcutsModal = document.getElementById('shortcutsModal');
            const closeModal = document.getElementById('closeModal');
            const fullscreenBtn = document.getElementById('fullscreenBtn');
            
            if (shortcutsBtn && shortcutsModal) {
                shortcutsBtn.addEventListener('click', function() {
                    shortcutsModal.style.display = 'flex';
                });
            }
            
            if (closeModal && shortcutsModal) {
                closeModal.addEventListener('click', function() {
                    shortcutsModal.style.display = 'none';
                });
            }
            
            if (shortcutsModal) {
                shortcutsModal.addEventListener('click', function(e) {
                    if (e.target === shortcutsModal) {
                        shortcutsModal.style.display = 'none';
                    }
                });
            }
            
            if (fullscreenBtn) {
                fullscreenBtn.addEventListener('click', function() {
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen().catch(err => {
                            console.log(`ÿÆÿ∑ÿ£ ŸÅŸä ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ©: ${err.message}`);
                        });
                        fullscreenBtn.textContent = 'ÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ©';
                    } else {
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                            fullscreenBtn.textContent = 'ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ©';
                        }
                    }
                });
                
                document.addEventListener('fullscreenchange', function() {
                    if (!document.fullscreenElement && fullscreenBtn) {
                        fullscreenBtn.textContent = 'ŸÖŸÑÿ° ÿßŸÑÿ¥ÿßÿ¥ÿ©';
                    }
                });
            }
            
            // ÿßŸÑÿ™ŸÉÿ±ÿßÿ± A-B
            let pointA = 0;
            let pointB = 0;
            let isABRepeat = false;
            
            const setPointA = document.getElementById('setPointA');
            const setPointB = document.getElementById('setPointB');
            const toggleABRepeat = document.getElementById('toggleABRepeat');
            
            if (setPointA) {
                setPointA.addEventListener('click', function() {
                    if (window.player && window.player.audio) {
                        pointA = window.player.audio.currentTime;
                        alert(`ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜŸÇÿ∑ÿ© A ÿπŸÜÿØ: ${window.player.formatTime(pointA)}`);
                    }
                });
            }
            
            if (setPointB) {
                setPointB.addEventListener('click', function() {
                    if (window.player && window.player.audio) {
                        pointB = window.player.audio.currentTime;
                        alert(`ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜŸÇÿ∑ÿ© B ÿπŸÜÿØ: ${window.player.formatTime(pointB)}`);
                    }
                });
            }
            
            if (toggleABRepeat) {
                toggleABRepeat.addEventListener('click', function() {
                    isABRepeat = !isABRepeat;
                    this.classList.toggle('active', isABRepeat);
                    
                    if (isABRepeat) {
                        this.textContent = 'ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ™ŸÉÿ±ÿßÿ±';
                    } else {
                        this.textContent = 'ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ŸÉÿ±ÿßÿ±';
                    }
                });
            }
            
            // ÿ±ÿ®ÿ∑ ÿ≥ŸÑÿßŸäÿØÿ±ÿßÿ™ ÿßŸÑŸÖÿπÿßÿØŸÑ ŸÖÿπ ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©
            const eqSliders = document.querySelectorAll('.eq-slider');
            eqSliders.forEach((slider, index) => {
                slider.addEventListener('input', function() {
                    const gainValue = parseFloat(this.value);
                    updateEQ(index, gainValue);
                });
            });
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ŸÑŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©
            document.addEventListener('keydown', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                
                switch(e.key.toLowerCase()) {
                    case 'q':
                        e.preventDefault();
                        // ÿ™ÿ¥ÿ∫ŸäŸÑ/ÿ•ŸäŸÇÿßŸÅ ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±
                        const bassEnhancementSlider = document.getElementById('bassEnhancementSlider');
                        if (bassEnhancementSlider) {
                            const currentBass = bassEnhancementSlider.value;
                            bassEnhancementSlider.value = currentBass > 0 ? 0 : 50;
                            updateBassBoost(parseInt(bassEnhancementSlider.value));
                        }
                        break;
                    case 'e':
                        e.preventDefault();
                        // ÿ™ÿ¥ÿ∫ŸäŸÑ/ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿµÿØŸâ
                        const reverbSlider = document.getElementById('reverb');
                        if (reverbSlider) {
                            const currentReverb = reverbSlider.value;
                            reverbSlider.value = currentReverb > 0 ? 0 : 50;
                            updateReverb(parseInt(reverbSlider.value));
                        }
                        break;
                    case 'w':
                        e.preventDefault();
                        // ÿ™ÿ¥ÿ∫ŸäŸÑ/ÿ•ŸäŸÇÿßŸÅ ÿπÿ±ÿ∂ ÿßŸÑŸÖÿπÿßÿØŸÑ
                        const eqContainer = document.querySelector('.eq-container');
                        if (eqContainer) {
                            eqContainer.style.display = eqContainer.style.display === 'none' ? 'block' : 'none';
                        }
                        break;
                }
            });
            
            // ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
            document.addEventListener('keydown', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }
                
                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        const playPauseBtn = document.getElementById('playPauseBtn');
                        if (playPauseBtn) playPauseBtn.click();
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        const nextBtn = document.getElementById('nextBtn');
                        if (nextBtn) nextBtn.click();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        const prevBtn = document.getElementById('prevBtn');
                        if (prevBtn) prevBtn.click();
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        if (window.player && window.player.audio) {
                            const newVolume = Math.min(window.player.audio.volume + 0.05, 1);
                            window.player.audio.volume = newVolume;
                            const volumeProgress = document.getElementById('volumeProgress');
                            if (volumeProgress) {
                                volumeProgress.style.width = `${newVolume * 100}%`;
                            }
                        }
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        if (window.player && window.player.audio) {
                            const newVolume = Math.max(window.player.audio.volume - 0.05, 0);
                            window.player.audio.volume = newVolume;
                            const volumeProgress = document.getElementById('volumeProgress');
                            if (volumeProgress) {
                                volumeProgress.style.width = `${newVolume * 100}%`;
                            }
                        }
                        break;
                    case 'r':
                    case 'R':
                        e.preventDefault();
                        const repeatBtn = document.getElementById('repeatBtn');
                        if (repeatBtn) repeatBtn.click();
                        break;
                    case 's':
                    case 'S':
                        e.preventDefault();
                        const shuffleBtn = document.getElementById('shuffleBtn');
                        if (shuffleBtn) shuffleBtn.click();
                        break;
                    case 'b':
                    case 'B':
                        e.preventDefault();
                        const boostBtn = document.getElementById('boostBtn');
                        if (boostBtn) boostBtn.click();
                        break;
                    case 'c':
                    case 'C':
                        e.preventDefault();
                        const cameraToggle = document.getElementById('cameraToggle');
                        if (cameraToggle) cameraToggle.click();
                        break;
                    case 'p':
                    case 'P':
                        e.preventDefault();
                        const powerSaveBtn = document.getElementById('powerSaveBtn');
                        if (powerSaveBtn) powerSaveBtn.click();
                        break;
                    case 'h':
                    case 'H':
                        e.preventDefault();
                        const shortcutsModal = document.getElementById('shortcutsModal');
                        if (shortcutsModal) {
                            shortcutsModal.style.display = shortcutsModal.style.display === 'flex' ? 'none' : 'flex';
                        }
                        break;
                    case 'F11':
                        e.preventDefault();
                        const fullscreenBtn = document.getElementById('fullscreenBtn');
                        if (fullscreenBtn) fullscreenBtn.click();
                        break;
                }
                
                if (e.ctrlKey && e.shiftKey) {
                    switch(e.key) {
                        case 'S':
                            e.preventDefault();
                            const securityModal = document.getElementById('securityModal');
                            if (securityModal) {
                                securityModal.style.display = securityModal.style.display === 'flex' ? 'none' : 'flex';
                                if (securityModal.style.display === 'flex' && securitySystem) {
                                    securitySystem.updateSecurityLogs();
                                }
                            }
                            break;
                        case 'P':
                            e.preventDefault();
                            if (securitySystem && !securitySystem.isParanoidMode) {
                                if (confirm('ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ≠ÿµŸÜÿü')) {
                                    securitySystem.enableParanoidMode();
                                }
                            }
                            break;
                    }
                }
            });
        }
        
        function requestNotificationPermission() {
            if ("Notification" in window && Notification.permission === "default") {
                Notification.requestPermission();
            }
        }
        
        // Ÿàÿ∏ÿßÿ¶ŸÅ ŸÖÿ≥ÿßÿπÿØÿ© ŸÑŸÑÿµŸàÿ™
        function resetAudioEffects() {
            // ÿ•ÿπÿßÿØÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ§ÿ´ÿ±ÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
            if (bassBoostNode) bassBoostNode.gain.value = 0;
            if (reverbNode && audioNodes.dryGain && audioNodes.wetGain) {
                audioNodes.dryGain.gain.value = 1;
                audioNodes.wetGain.gain.value = 0;
            }
            if (gainNode) gainNode.gain.value = 1;
            
            // ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿπÿßÿØŸÑ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ±
            eqGains.forEach((gain, index) => {
                if (eqFilters && eqFilters[index]) {
                    eqFilters[index].gain.value = 0;
                }
            });
            
            console.log('üîÑ ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ¨ŸÖŸäÿπ ŸÖÿ§ÿ´ÿ±ÿßÿ™ ÿßŸÑÿµŸàÿ™');
        }
        
        // ÿØÿßŸÑÿ© ŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑŸÜÿ∏ÿßŸÖ
        function testAudioSystem() {
            console.log('üéµ ÿßÿÆÿ™ÿ®ÿßÿ± ŸÜÿ∏ÿßŸÖ ÿßŸÑÿµŸàÿ™:');
            console.log('- AudioContext:', audioContext ? '‚úÖ ÿ¨ÿßŸáÿ≤' : '‚ùå ÿ∫Ÿäÿ± ÿ¨ÿßŸáÿ≤');
            console.log('- ÿßŸÑŸÖÿπÿßÿØŸÑ:', eqFilters ? `‚úÖ ${eqFilters.length} ŸÜÿ∑ÿßŸÇ` : '‚ùå ÿ∫Ÿäÿ± ÿ¨ÿßŸáÿ≤');
            console.log('- ÿßŸÑÿµÿØŸâ:', reverbNode ? '‚úÖ ÿ¨ÿßŸáÿ≤' : '‚ùå ÿ∫Ÿäÿ± ÿ¨ÿßŸáÿ≤');
            console.log('- ŸÖÿπÿ≤ÿ≤ ÿßŸÑÿ¨ŸáŸäÿ±:', bassBoostNode ? '‚úÖ ÿ¨ÿßŸáÿ≤' : '‚ùå ÿ∫Ÿäÿ± ÿ¨ÿßŸáÿ≤');
            console.log('- ŸÖÿ∂ÿÆŸÖ ÿßŸÑÿµŸàÿ™:', gainNode ? '‚úÖ ÿ¨ÿßŸáÿ≤' : '‚ùå ÿ∫Ÿäÿ± ÿ¨ÿßŸáÿ≤');
            
            // ÿßÿÆÿ™ÿ®ÿßÿ± ŸÉŸÑ ŸÖŸÉŸàŸÜ
            if (bassBoostNode) {
                bassBoostNode.gain.value = 10;
                setTimeout(() => bassBoostNode.gain.value = 0, 500);
            }
        }
    </script>
</body>
</html>
